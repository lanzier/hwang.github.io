<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://hwang.top</id>
    <title>Hwang&apos;s Blog</title>
    <updated>2021-05-08T04:55:53.683Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://hwang.top"/>
    <link rel="self" href="https://hwang.top/atom.xml"/>
    <subtitle>欢迎来到 Hwang 的小博客 &lt;br&gt;
📚 博客通过 Gridea 搭建，感谢 Gridea 的免费服务；&lt;br&gt;
🌍 托管于 Github，感谢 Github.com 提供的服务器资源  &lt;br&gt;
✏️ 文章由 Hwang，在 Ulysses 上完成写作/亦或者拷贝&lt;br&gt;
👨‍🎨 封面由 Hwang，在 Figma 上完成创作 &lt;br&gt;
这里显然不是什么技术博客，也不会有太多值得期待的干货。</subtitle>
    <logo>https://hwang.top/images/avatar.png</logo>
    <icon>https://hwang.top/favicon.ico</icon>
    <rights>All rights reserved 2021, Hwang&apos;s Blog</rights>
    <entry>
        <title type="html"><![CDATA[Hwang's Read List - EP 21]]></title>
        <id>https://hwang.top/post/hwangs-read-list-ep-21/</id>
        <link href="https://hwang.top/post/hwangs-read-list-ep-21/">
        </link>
        <updated>2021-04-29T10:57:22.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>这是不定期更新的个人阅读目录，在我的输入流程中，文章从RSS以及其他不同平台获取，这里存放那些我好好看了的文章。</p>
</blockquote>
<p><a href="https://www.theverge.com/22231657/mkbhd-marques-brownlee-interview-youtube-creator-influencer-decoder">The business of influence with MKBHD</a></p>
<blockquote>
<p>Nilay Patel talks with Marques Brownlee, otherwise known as MKBHD, about building a business as a YouTuber, how content creators make money, and how to scale when you are the brand.</p>
</blockquote>
<p><a href="https://mp.weixin.qq.com/s?__biz=MjM5NzU4ODQ2MA==&amp;mid=2676502839&amp;idx=1&amp;sn=a8f057a40db134d2589570619d7553f0&amp;chksm=bcab2db48bdca4a2a7cf63bbe277562eaffda0c930847e7dd5d6ba3fc2774a8d03615b1bcde9#rd">如何做一档“好看”的播客？我们研究了100+档中文播客的logo｜若有所播</a></p>
<blockquote>
<p>中文播客视觉大赏</p>
</blockquote>
<p><a href="https://thesweetsetup.com/how-to-use-a-calendar/">How to Use a Calendar – The Sweet Setup</a></p>
<blockquote>
<p>In this article, I’m going to share two very important things for how to use your calendar: why your task list should be on your calendar, and how to get it there by using time blocking</p>
</blockquote>
<p><a href="https://sspai.com/post/65051">重度使用这款墨水屏手机之后，谈谈我对电子纸的理解和预测 - 少数派</a></p>
<blockquote>
<p>我们的每一次表达，都是在优化这个世界。</p>
</blockquote>
<p><a href="https://www.allnow.com/post/601444d3da5e4a26e2df5403">即使可以居家办公，为什么人们还是热衷于去咖啡馆？-全现在官方网站</a></p>
<blockquote>
<p>如果你被周围环境的刺激稍微分散一下注意力，能提高抽象思维能力，从而产生更有创意的想法 居家办公,咖啡馆,随机共振,咖啡馆效应,未来实验手册</p>
</blockquote>
<p><a href="https://blog.csdn.net/UbuntuTouch/article/details/100112283">Elasticsearch：应用 Nodejs 来访问 Elasticsearch_Elastic-CSDN博客_elasticsearch nodejs</a></p>
<blockquote>
<p>Nodejs Elasticsearch教程示例是今天的主要主题。 Elasticsearch是一个开源搜索引擎，由于其高性能和分布式架构而变得非常流行。 Elasticsearch构建于Apache Lucene之上，后者是一个高性能的文本搜索引擎库。 虽然Elasticsearch可以执行数据的存储和检索，但其主要目的不是用作数据库。 相反，它是一个搜索引擎（服务器），其主要目标是索引，...</p>
</blockquote>
<p><a href="https://yuezhu.org/bstories-7/">三月恢复期 – MilkShakism</a></p>
<blockquote>
<p>undefined</p>
</blockquote>
<p><a href="https://jesor.me/2021/three-stories-about-zhihu/">跟知乎有关的三个故事 | 大破进击</a></p>
<blockquote>
<p>知乎是一个由大家共建的问答社区，这里也许没有标准答案。</p>
</blockquote>
<p><a href="https://sspai.com/post/60414">Homeassistant：不仅仅是更优秀的智能家居解决方案 - 少数派</a></p>
<blockquote>
<p>引言在智能家居市场，米家无疑是垄断地位。但是米家对于空调控制的优化不佳。首先是每次打开空调都是从16°起步，无法记住上次的温度。米家智能中温度风量只能二选一，只有16°和高速或者其他温度和自动风速。就 ...</p>
</blockquote>
<p><a href="https://sspai.com/post/65938">信息收集的新工具：Walling vs. my mind - 少数派</a></p>
<blockquote>
<p>前言当我回顾少数派2020年度征文活动中的获奖文章时，发现作者们提到了很多关于信息收集的工具：空谷使用Airtable搭建科研学术知识库,啊森通过印象笔记和Eagle来收集网络文章和图片素材，chyi ...</p>
</blockquote>
<p><a href="https://linhongbo.com/posts/openwrt-on-esxi/">ESXi 安装&amp;配置 OpenWrt</a></p>
<blockquote>
<p>基于 ESXi X86 虚拟机设备构建 OpenWrt 路由器是一种兼顾性能和敏捷性的软路由解决方案。本文详细介绍了如何在 vSphere ESXi 6.7 下部署最新版本的 OpenWrt。</p>
</blockquote>
<p><a href="https://www.xiaoyuzhoufm.com/episode/6063b931c62ceb1d7cf29f42">37: 茫茫相似将万物勾连</a></p>
<blockquote>
<p>Analog vs Digital，这不是一个新问题。analog 既是指类似物，又指模拟技术，同时在今天这个时代意味着数字化生活的反面。找寻 analog 和 digital<br>
广义和狭义的意义，或许对思维方式也有启示。<br>
邮箱：bukelilun@outlook.com<br>
网站：bukelilun.com</p>
</blockquote>
<ul>
<li>TEDx Talks 视频 “Finding My Analog Self In A Digital World”</li>
<li>Alexander Galloway 学术讲座视频 &quot;The Golden Age of Analog (It's Now)&quot;</li>
<li>Alexander Galloway “The Digital and the Analog&quot; 课程大纲 （本期节目大部分的引用都可以在其中找到）</li>
<li>Alexander Galloway “How to Spot an Analog Philosopher”</li>
<li>Alexander Galloway “How to Spot an Digital Philosopher”</li>
<li>知乎回答：如何简单清晰地解释哥德尔不完备定理？</li>
<li>边缘意识</li>
<li>Walt Whitman, On the Beach at Night Alone<br>
最后推荐的书：</li>
<li>Benjamin Peters (editor), Digital Keywords: A Vocabulary of Information Society and Culture</li>
<li>Brain Massumi, Parables for the Virtual</li>
<li>Hito Steyerl, “In Defense of the Poor Image”</li>
<li>Shane Denson, Discorrelated Images</li>
<li>Austin Kleon, Steal Like an Artist</li>
<li>Sönke Ahrens, How to Take Smart Notes</li>
</ul>
<p><a href="http://www.woshipm.com/pd/4421411.html">B端Dashboard设计指南（一） | 人人都是产品经理</a></p>
<blockquote>
<p>编辑导语：Dashboard在B端设计中经常可以见到，并且在网页端用的比较多，Dashboard的设计页面不用过于复杂，因为对于To B用户而言，它的核心始终是传递信息；本文作者分享了关于B端Dashboard设计的详细指南，我们一起来了解一下。 一、Dash</p>
</blockquote>
<p><a href="https://www.qikqiak.com/post/gitlab-install-on-k8s/">在 Kubernetes 上安装 Gitlab</a></p>
<p>Gitlab官方提供了 Helm 的方式在 Kubernetes 集群中来快速安装，但是在使用的过程中发现 Helm 提供的 Chart 包中有很多其他额外的配置，所以我们这里使用自定义的方式来安装，也就是自己来定义一些资源清单文件。</p>
<p>Gitlab主要涉及到3个应用：Redis、Postgresql、Gitlab 核心程序，实际上我们只要将这3个应用分别启动起来，然后加上对应的配置就可以很方便的安装 Gitlab 了，我们这里选择使用的镜像不是官方的，而是 Gitlab 容器化中使用非常多的一个第三方镜像：sameersbn/gitlab，基本上和官方保持同步更新，地址：http://www.damagehead.com/docker-gitlab/</p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzI2OTA4NTY0MA==&amp;mid=2650429172&amp;idx=2&amp;sn=3c6807759cfb79e2c09747025ab9b4ec&amp;chksm=f2eb4853c59cc145f3302283f9be46a62ebffa0dee4220efa467ae787e769d388a4555ddae4b#rd">关于中国猿的知识，看这一篇就够了</a></p>
<blockquote>
<p>长臂猿保护的Q\x26amp;A大全。</p>
</blockquote>
<p><a href="https://segmentfault.com/a/1190000021589726">Elasticsearch集群搭建（基于Elasticsearch7.5.1）</a></p>
<blockquote>
<p>Elasticsearch集群搭建 环境介绍：CentOS7、jdk11.0.5、Elasticsearch7.5.1 准备三台Linux系统，本教程使用的是CentOS7如下IP地址： {代码...} 注意：以上三台Linux系统都要安装jdk 下载Elasticsearch Linux: elasticsearch-7.5.1-linux-x86_64.tar.gz {代码...} 系统设置 Elasticsearch不能在 root 用户下启动，我们需...</p>
</blockquote>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzAxNDE0MjA2OQ==&amp;mid=2650422689&amp;idx=1&amp;sn=578338e62c7a2bfbd1e9231b2d5a8ecf&amp;chksm=839942bbb4eecbadd8055f19860b51be6f20933830c9ed5d2da5f4178053dd54baa601c6b0d3#rd">作为 flomo 的工程师，我在思考些什么？</a></p>
<blockquote>
<p>分享我作为 flomo 工程师的部分思考和决策。</p>
</blockquote>
<p><a href="https://fooleng.com/2020/03/10/vmware-esxi-single_ip_for_nat/">Vmware Esxi 使用单个外网IP地址实现NAT – FoolEng</a></p>
<blockquote>
<p>undefined</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[K8S 中的 Ingress/NFS的持久化存储]]></title>
        <id>https://hwang.top/post/k8s-zhong-de-ingressnfs-de-chi-jiu-hua-cun-chu/</id>
        <link href="https://hwang.top/post/k8s-zhong-de-ingressnfs-de-chi-jiu-hua-cun-chu/">
        </link>
        <updated>2021-04-28T09:04:06.000Z</updated>
        <content type="html"><![CDATA[<h1 id="k8s-中的-ingressnfs的持久化存储">K8S 中的 Ingress/NFS的持久化存储</h1>
<ul>
<li>与 Ingress 的链接方式相对应的是 Nodeport</li>
<li>Ingress 与 service 相关联</li>
<li>使用ingress 后可以居于域名对pod提供的服务进行访问；</li>
</ul>
<h2 id="部署ingress">部署ingress</h2>
<p>具体步骤</p>
<ol>
<li>部署ingress Controller</li>
<li>创建 ingress 规则<br>
官方维护的是 nginx 控制器</li>
</ol>
<h3 id="查看状态">查看状态</h3>
<ul>
<li>查看对应名称空间即可<br>
<code>kubectl get pods -n nginx-ingress</code></li>
</ul>
<h2 id="添加-https-支持">添加 https 支持</h2>
<h4 id="1-生成-sercet对象">1. 生成 sercet对象</h4>
<p><code>sudo kubectl create secret tls [secret 的名称] --key [证书key文件地址] --cert [证书pem文件地址] --namespace [如有必要指定namespace]</code></p>
<p>使用 <code>kubectl get secret --namespace [如有必要指定namespace]</code> 查看证书列表</p>
<p>使用<code>sudo kubectl describe secrets/secret-https-gitlab --namespace [如有必要指定namespace]</code> 查看特定证书信息。</p>
<p>出于安全考虑，k8s不会显示证书内容；</p>
<h4 id="2-在-ingress-内填写配置">2. 在 Ingress 内填写配置</h4>
<p>示例的配置基本结构如下</p>
<pre><code class="language-yaml">apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: your-service-name
  namespace: your-name-space
spec:
  tls:
  - hosts:
    - your-site.com
    secretName: secret-name # secret 的名称

  rules:
  - host: your-site.com # 域名
    http:
      paths: 
      - pathType: Prefix # 文档 https://kubernetes.io/zh/docs/concepts/services-networking/ingress/
        path: &quot;/&quot;
        backend:
          service:
            name: your-service-name
            port: 
               number: 80 # 端口是内部端口，并不是外部端口；
</code></pre>
<p>需要注意的是 namespace 内需要有对应的 secret 哦，如果不指定，默认的 namespace 是在 default 的 namespace 中的。</p>
<h2 id="持久化存储">持久化存储</h2>
<h3 id="0部署一个nfs服务器">0.部署一个NFS服务器</h3>
<p>基本操作，参考一下网站内容就可以了；</p>
<h3 id="1-使用-helm-进行管理">1. 使用 helm 进行管理</h3>
<p>安装 helm:<br>
<a href="https://helm.sh/zh/docs/intro/install/">https://helm.sh/zh/docs/intro/install/</a></p>
<pre><code class="language-bash">$ curl https://baltocdn.com/helm/signing.asc | sudo apt-key add -
$ sudo apt-get install apt-transport-https --yes
echo &quot;deb https://baltocdn.com/helm/stable/debian/ all main&quot; | sudo tee /etc/apt/sources.list.d/helm-stable-debian.list
$ sudo apt-get update
$ sudo apt-get install helm
</code></pre>
<h3 id="2-使用-helm-进行-storageclass-的设置">2. 使用 helm 进行 StorageClass 的设置</h3>
<p><a href="https://github.com/kubernetes-sigs/nfs-subdir-external-provisioner/blob/master/charts/nfs-subdir-external-provisioner/README.md">https://github.com/kubernetes-sigs/nfs-subdir-external-provisioner/blob/master/charts/nfs-subdir-external-provisioner/README.md</a></p>
<pre><code class="language-bash">$ sudo helm repo add nfs-subdir-external-provisioner https://kubernetes-sigs.github.io/nfs-subdir-external-provisioner/
$ sudo helm install nfs-subdir-external-provisioner nfs-subdir-external-provisioner/nfs-subdir-external-provisioner \
    --set nfs.server=x.x.x.x \
    --set nfs.path=/exported/path
</code></pre>
<p>编写<code>pv.yml</code>和<code>pvc.yml</code>文件，或者直接在 kuborad 上操作也是可以的；<br>
注意，每个node节点都必须先安装好<code>nfs-common</code>，不然会报错哦：<a href="https://stackoverflow.com/questions/34113569/kubernetes-nfs-volume-mount-fail-with-exit-status-32">相关资料</a></p>
<p><code>apt-get install -y nfs-common</code></p>
<blockquote>
<p>ps：可能需要科学的网络环境</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Elasticsearch 的管理运维之数据导入——使用 Logstash 进行 CSV 数据的导入]]></title>
        <id>https://hwang.top/post/elasticsearch-shi-yong-logstash-jin-xing-csv-shu-ju-de-dao-ru/</id>
        <link href="https://hwang.top/post/elasticsearch-shi-yong-logstash-jin-xing-csv-shu-ju-de-dao-ru/">
        </link>
        <updated>2021-04-28T01:05:54.000Z</updated>
        <content type="html"><![CDATA[<ol>
<li>安装：</li>
</ol>
<p><a href="https://www.elastic.co/cn/downloads/logstash">Download Logstash Free | Get Started Now | Elastic</a></p>
<p>下载对应的 logstash 版。</p>
<ol start="2">
<li>编辑导入文件</li>
</ol>
<p>官方文档：</p>
<p><a href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-csv.html">Csv filter plugin | Logstash Reference [7.12] | Elastic</a></p>
<p>配置文件分为 3 个部分：</p>
<ul>
<li>input： 文件输入；</li>
<li>filter: 数据内容的过滤，在这里可以做例如是否留header做为表头的设置等；</li>
<li>outupt：输出设置；🔗<a href="https://www.elastic.co/guide/en/logstash/7.12/output-plugins.html">相关文档</a></li>
</ul>
<p>示例代码：</p>
<blockquote>
<p>已有index的情况下添加数据</p>
</blockquote>
<pre><code class="language-other">input
{
    file{
    path =&gt; [&quot;your csv file path&quot;] 
    start_position =&gt; &quot;beginning&quot;
    }
}
filter{
    csv{
        columns =&gt; [&quot;some columns&quot;]
        convert =&gt; {
            &quot;ESDATE&quot;=&gt; &quot;date&quot;
            &quot;some convert&quot;
        }
    }
}
output{
    elasticsearch{
        hosts =&gt; [&quot;your es host&quot;]
        index =&gt; &quot;your es index name&quot;
    }
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Elasticsearch 的管理运维之重启集群]]></title>
        <id>https://hwang.top/post/elasticsearch-guan-li/</id>
        <link href="https://hwang.top/post/elasticsearch-guan-li/">
        </link>
        <updated>2021-04-24T13:27:06.000Z</updated>
        <content type="html"><![CDATA[<h2 id="重启-elasticsearch-集群">重启 Elasticsearch 集群</h2>
<ol>
<li>
<h3 id="关闭集群">关闭集群</h3>
</li>
</ol>
<h4 id="第一步关闭自动分布">第一步：关闭自动分布</h4>
<pre><code class="language-other">curl -X PUT &quot;localhost:9200/_cluster/settings?pretty&quot; -H 'Content-Type: application/json' -d'
{
  &quot;persistent&quot;: {
	&quot;cluster.routing.allocation.enable&quot;: &quot;primaries&quot;
  }
}
</code></pre>
<h4 id="第二步执行同步刷新">第二步：执行同步刷新</h4>
<pre><code class="language-other">curl -X POST &quot;localhost:9200/_flush/synced?pretty&quot;
</code></pre>
<p>::注意查看返回的结果中，是否有失败的信息，如果有的话，再执行一次；（执行失败也会返回 200 状态码的，还是要注意看内容）::</p>
<h4 id="第三步关闭所有节点">第三步：关闭所有节点</h4>
<p>通过kill 对应的 pid 进行关闭；</p>
<ol start="2">
<li>
<h2 id="重新启动集群"><a href="https://blog.csdn.net/zzqaaasss/article/details/104191044">重新启动集群</a></h2>
</li>
</ol>
<h4 id="第一步">第一步：</h4>
<p>执行完操作后逐个启动节点</p>
<pre><code class="language-other">cd [your es home path]
./bin/elasticsearch -d -p  [your es home path]/pid.txt
</code></pre>
<h4 id="第二步">第二步：</h4>
<p>等所有节点启动完成后，可以通过执行如下请求查看集群状态：</p>
<pre><code class="language-other">curl -X GET &quot;localhost:9200/_cat/health?pretty&quot;
curl -X GET &quot;localhost:9200/_cat/nodes?pretty&quot;
</code></pre>
<p>状态分别有：red，yellow，green。</p>
<h4 id="第三步">第三步：</h4>
<p>启用分片自动分布</p>
<pre><code class="language-other">curl -X PUT &quot;localhost:9200/_cluster/settings?pretty&quot; -H 'Content-Type: application/json' -d'

{
	&quot;persistent&quot;: {  
	&quot;cluster.routing.allocation.enable&quot;: null
	}

}
</code></pre>
<p>重新启用分配后，集群便开始将副本分片分配给数据节点。此时，恢复索引和搜索是安全的，但是如果您可以等待直到成功分配了所有主分片和副本分片并且所有节点的状态为，集群就会恢复得更快green。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[在 Ubuntu 中部署 Elasticsearch 集群]]></title>
        <id>https://hwang.top/post/zai-ubuntu-zhong-bu-shu-elasticsearch-ji-qun/</id>
        <link href="https://hwang.top/post/zai-ubuntu-zhong-bu-shu-elasticsearch-ji-qun/">
        </link>
        <updated>2021-04-19T13:41:41.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="step-1-install-java">Step 1. Install Java</h2>
<p>给每一台服务器安装 java 环境</p>
<p><code>sudo apt install openjdk-15-jdk</code></p>
]]></summary>
        <content type="html"><![CDATA[<h2 id="step-1-install-java">Step 1. Install Java</h2>
<p>给每一台服务器安装 java 环境</p>
<p><code>sudo apt install openjdk-15-jdk</code></p>
<!-- more -->
<h2 id="step-2-download-elasticsearch">Step 2. Download Elasticsearch</h2>
<p>下载 Elasticsearch 的安装包：<a href="https://www.elastic.co/cn/start">::https://www.elastic.co/cn/start::</a> 选择Linux 版本，下载 Elasticsearch 与 Kibana 的 tar 包。</p>
<p>考虑到复杂的网络环境问题，我这边直接使用下载到本地再上传到服务器的方式。</p>
<p>文件上传：</p>
<ul>
<li>
<p>你可以使用 scp 进行上传:</p>
<p><code>scp [local path] [your-server]:[remote path]</code></p>
</li>
<li>
<p>也可以使用 VScode remote shell 进行上传；</p>
</li>
<li>
<p>还可以使用 sftp 进行上传；</p>
</li>
</ul>
<p>文件上传后，将Elasticsearch的包文件传给局域网内的机器中；</p>
<h2 id="step3-install-elasticsearch">Step3. Install Elasticsearch</h2>
<h4 id="31-创建一个标准用户">3.1 创建一个标准用户</h4>
<p>::Elasticsearch 会动态执行一些脚本，所以为了安全起见，务必创建一个新用户（没有管理员权限那种）：::</p>
<p><code>adduser [username]</code></p>
<p>之后设置密码。</p>
<h4 id="32-创建项目目录">3.2 创建项目目录</h4>
<pre><code class="language-other">cd /home/[your es user]
mkdir -p elasticsearch/data
mkdir -p elasticsearch/logs
</code></pre>
<p><strong>data</strong>：存储Elasticsearch索引文件数据</p>
<p><strong>logs</strong>：存储日志文件</p>
<h4 id="33-解压文件-修改配置">3.3 解压文件、修改配置</h4>
<p>将将Elasticsearch的包文件移动到 elasticsearch 目录下，使用以下命令进行解压缩：</p>
<pre><code class="language-other">tar -xvf elasticsearch-7.12.0-linux-x86_64.tar.gz
</code></pre>
<p>接下来，修改配置：</p>
<pre><code class="language-other">vim elasticsearch-7.12.0/config/elasticsearch.yml
</code></pre>
<p>其中需要修改的是：</p>
<ul>
<li><code>cluster.name</code>: 名称</li>
<li><code>node.name</code>: 节点名称</li>
<li><code>path.data</code>: 数据文件目录，修改为上面data目录，即 <code>/home/[your es user]/elasticsearch/data</code></li>
<li><code>path.logs</code>: 日志文件目录，修改为上面logs目录，即 <code>/home/[your es user]/elasticsearch/logs</code></li>
<li><code>network.host</code>: 本机IP</li>
<li><code>discovery.seed_hosts</code>: 子节点的ip</li>
<li><code>cluster.initial_master_nodes</code>: 参与竞选的节点</li>
</ul>
<p>之后可以直接将 这个 elasticsearch 文件夹通过 scp 发送到另外两台服务器中::，注意修改IP地址；::</p>
<h4 id="34-逐一启动-elasticsearch-检查是否有错误">3.4 逐一启动 elasticsearch ，检查是否有错误</h4>
<p>使用后台启动的方式：</p>
<pre><code class="language-other">./bin/elasticsearch -d -p pid
</code></pre>
<p>使用:</p>
<pre><code class="language-other">curl http://192.168.28.129:9200/_cat/health?v
</code></pre>
<p>查看返回的结果是否是 “green”</p>
<h4 id="35-最后可能会有的问题参考链接">3.5 最后可能会有的问题（<a href="https://segmentfault.com/a/1190000021589726"><code>参考链接</code></a>）：</h4>
<h4 id="351-设置虚拟内存">3.5.1 设置虚拟内存</h4>
<p>将虚拟内存设置大一些，否则在启动elasticsearch时会出错导致启动失败：</p>
<pre><code class="language-other">ERROR: [1] bootstrap checks failed
[1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]
</code></pre>
<p>输入 <code>vi /etc/sysctl.conf</code> 命令在 <code>sysctl.conf</code> 中配置如下内容：</p>
<pre><code class="language-other">vm.max_map_count=655360
</code></pre>
<p>接着输入如下命令让配置生效：</p>
<pre><code class="language-other">sysctl -p
</code></pre>
<p>3.5.2 设置最大文件描述符</p>
<p>在启动Elasticsearch有可能会出现如下错误：</p>
<pre><code class="language-other">[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at
least [65536]
</code></pre>
<p>错误说明：elasticsearch过程的最大文件描述符 <code>[4096]</code> 太低，增加到</p>
<p>最少 <code>[65536]</code></p>
<p>接下来我们修改最大文件描述符，输入 <code>vi /etc/security/limits.conf</code> 命令在 <code>limits.conf</code> 中配置如下内容：</p>
<pre><code class="language-other">* soft nofile 65536
* hard nofile 131072
* soft nproc 2048
* hard nproc 4096
</code></pre>
<h4 id="353-设置最大线程数">3.5.3 设置最大线程数</h4>
<p>在启动Elasticsearch有可能会出现如下错误：</p>
<pre><code class="language-other">[2]: max number of threads [1024] for user [elsearch] is too low, increase to atleast[4096]
</code></pre>
<p>错误说明：线程<code>[1024]</code>用户<code>[elsearch]</code>的最大数量太低，增加至少<code>[4096]</code></p>
<p>接下来我们修改线程数，输入 <code>vi /etc/security/limits.d/20-nproc.conf</code> 命令在 <code>20-nproc.conf</code>中配置如下内容：</p>
<pre><code class="language-other">* soft nproc 4096
</code></pre>
<h4 id="354-seccomp">3.5.4 SecComp</h4>
<p>在启动Elasticsearch有可能会出现如下错误：</p>
<pre><code class="language-other">[3]: system call filters failed to install; check the logs and fix your configuration or disable system call filters at your own risk
</code></pre>
<p>错误说明：系统调用过滤器安装失败;检查日志和修复配置或禁用系统调用过滤器需要您自担风险</p>
<p>这是在因为 <code>Centos7</code> 不支持 <code>SecComp</code> ，而ES5.2.0之后默认 <code>bootstrap.system_call_filter</code> 为<code>true</code>进行检测，所以导致检测失败，失败后直接导致ES不能启动。</p>
<p>接下来我们修改配置文件，输入 <code>vim config/elasticsearch.yml</code> 命令，在 <code>elasticsearch.yml</code> 中配置如下内容：</p>
<pre><code class="language-other"># ----------------------------------- Memory -----------------------------------
#
# Lock the memory on startup:
#
#bootstrap.memory_lock: true
# 设置为false不进行检测
bootstrap.system_call_filter: false
#
# Make sure that the heap size is set to about half the memory available
# on the system and that the owner of the process is allowed to use this
# limit.
#
# Elasticsearch performs poorly when the system is swapping the memory.
#
</code></pre>
<h2 id="step4install-kibana">Step4.Install kibana</h2>
<p>安装 kibana 作为 elasticsearch 的管理软件。下载 tar 包，之后scp传输到对应的服务器中；</p>
<p>使用 tar 进行解压缩。运行 <code>./bin/kibana</code>  即可前台启动，运行 <code>nohup ./bin/kibana &amp;</code> 即可后台启动。</p>
<p>其配置文件和es一样，在 <code>./config/kibana.yml</code> 其中可能要修改的有：</p>
<ul>
<li><strong>server.port</strong>: 服务的端口号</li>
<li><strong>server.host:</strong> 服务的ip地址</li>
<li><strong>elasticsearch.hosts:</strong>  es 集群们的地址，如果大于一个，可以使用<code>[ &quot;http://yourEsHost:yourEsPort&quot;, &quot;http://yourEsHost:yourEsPort&quot;,&quot;http://yourEsHost:yourEsPort&quot;]</code> 的方式。</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hwang's Read List - EP 20]]></title>
        <id>https://hwang.top/post/hwangs-read-list-ep-20/</id>
        <link href="https://hwang.top/post/hwangs-read-list-ep-20/">
        </link>
        <updated>2021-03-27T12:01:21.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>这是不定期更新的个人阅读目录，在我的输入流程中，文章从RSS以及其他不同平台获取，这里存放那些我好好看了的文章。</p>
</blockquote>
<p><a href="https://www.theverge.com/22231657/mkbhd-marques-brownlee-interview-youtube-creator-influencer-decoder">The business of influence with MKBHD</a></p>
<blockquote>
<p>Nilay Patel talks with Marques Brownlee, otherwise known as MKBHD, about building a business as a YouTuber, how content creators make money, and how to scale when you are the brand.<br>
<a href="https://sspai.com/post/65492">不要大喊大叫——小议标点和格式在表达强调中的滥用 - 少数派</a><br>
作为中文的使用者，我们不是每个人都是语言学家，也不都有能力通过创作给文学殿堂添砖加瓦，但至少可以做到保持敬畏、不行破坏。<br>
<a href="https://yuezhu.org/2020-clippings/">2021 继续阅读与呼吸 – MilkShakism</a><br>
undefined<br>
<a href="https://mp.weixin.qq.com/s?__biz=MzI3NDQzNTk2Mw==&amp;mid=2247484172&amp;idx=1&amp;sn=5ee525a099ee0cb36ddad23d87ce2971&amp;chksm=eb155918dc62d00e9a7ce720eeb555e79936072f3927983f3ec49e13e4d3e83f0fd2600801a1#rd">社交身份强化与内容网络效应</a><br>
数字不是需要隐藏或可以套利的工具，数字只是内容在网络中创造了有意义的摩擦所带来的副产品。<br>
<a href="https://mp.weixin.qq.com/s?__biz=MjM5ODA5NTI4Mg==&amp;mid=2656653010&amp;idx=1&amp;sn=12ad2325abaad3423ca04e38f41d75f0&amp;chksm=bd621e0f8a159719dcab3facebe21d946bd1fc06ec702041bb23e12f7a3408cf4dd692d520f0#rd">缪斯的抵押权:艺术品的定价、交易与金融</a><br>
景观社会理论对于媒体时代与后工业时代的“景观堆积”作出了深刻的观察和表述，在现代生产条件无所不在的社会，生活本身展现为“景观”的庞大聚集。直接存在的一切全部转化为一个表象。<br>
<a href="https://www.ixiqin.com/2020/09/keyboard-settings-using-experience-how-to-optimize-small-program/">键盘设置如何优化小程序使用体验? | 白宦成</a><br>
在小程序开发过程中，用户输入是必不可少的，我们经常会需要用户输入一些内容，来完成产品收集用户信息的需求。 在这… 继续阅读键盘设置如何优化小程序使用体验?<br>
<a href="https://mp.weixin.qq.com/s?__biz=MzU0OTc3NDY0Mg==&amp;mid=2247488532&amp;idx=1&amp;sn=efb6251d5d464ad89385fff01ce9b7ab&amp;chksm=fbabe049ccdc695f048496c551bdb526224967bb5e47c3d408c9ecf54b664b53064760119c31#rd">按标题来搜集资料有何弊端？</a></p>
</blockquote>
<p><a href="https://juejin.cn/post/6938385978004340744">2万字系统总结，带你实现 Linux 命令自由？</a></p>
<blockquote>
<p>Linux 的学习对于一个程序员的重要性是不言而喻的。前端开发相比后端开发，接触 Linux 机会相对较少，因此往往容易忽视它。但是学好它却是程序员必备修养之一。 如果本文对你有所帮助，请点个👍 吧。 作者使用的是阿里云服务器 ECS （最便宜的那种） CentOS 7.7 …<br>
<a href="https://mp.weixin.qq.com/s?__biz=MzAwODUyNzAzNw==&amp;mid=2247483825&amp;idx=1&amp;sn=41c1478b1f494ccd74c1a16a0cb3f89a&amp;chksm=9b6ccc63ac1b4575f8bcfdfab8e9bb0c21ee50cdde9acc9212eafcf6baadbd6702ffd47d4f59#rd">Golang 在即刻后端的实践</a><br>
背景随着业务变迁，即刻后端服务内积累了大量的陈旧代码，维护成本较高，代码重构甚至重写被提上了日程。相比起 N</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[学习 Elasticsearch ! EP01]]></title>
        <id>https://hwang.top/post/xue-xi-elasticsearch-ep01/</id>
        <link href="https://hwang.top/post/xue-xi-elasticsearch-ep01/">
        </link>
        <updated>2021-03-18T10:21:18.000Z</updated>
        <content type="html"><![CDATA[<h2 id="macos-上安装">macOS 上安装</h2>
<p>使用 Homebrew 进行安装，当然可以先安装好 Java 环境；</p>
<pre><code class="language-bash">brew install elasticsearch
</code></pre>
<p>安装目录在：</p>
<pre><code class="language-bash">/usr/local/Cellar/elasticsearch-full
</code></pre>
<p>启动：</p>
<pre><code class="language-bash">elasticsearch
</code></pre>
<p>即可启动。</p>
<p>安装完本体，还可以安装一个配套管理工具：</p>
<pre><code class="language-bash">brew install kibana
</code></pre>
<p>安装完成后直接执行<code>kibana</code>命令启动 Kibana，浏览器中通过：<code>http://localhost:5601</code> 即可访问。</p>
<h2 id="elasticsearch-的核心概念">Elasticsearch 的核心概念</h2>
<ul>
<li>Node： 节点；集群中每个运行中的 es服务器称之为节点；</li>
<li>Cluster：集群，由具有相同的一个或多个 es 节点组成的，各个节点协同工作，共享数据。同一个集群内节点的名字不能重复，但集群名称一定要相同。
<ol>
<li>一般启动新集群时，会用一个名称代替默认的 cluster.name，避免其自动加入到局域网内的其他集群中。</li>
<li>集群状态如下
<ul>
<li>green：表示所有节点正常运行</li>
<li>yellow：表示预警，所有主分片正常，至少有一个副本不正常；</li>
<li>red：集群无法正常，至少一个分片的主分片及它的全部副本分片都不可正常工作。<strong>依然可以查询（正常的分片还是工作的），但是只能查询部分数据（正常分片中的数据）！</strong></li>
</ul>
</li>
</ol>
</li>
<li>Shards： 分片。当索引数据量太大时，受限于单个节点的内存、磁盘处理能力等，节点无足够快的响应客户端请求，此时需要将一个索引上的数据进行水平拆分，拆分出来数据称为分片。
<ol>
<li><strong>通常，每个分片都会放到不同的服务器上。</strong>
<ol start="2">
<li>创建索引时需要制定分片数量，并且分片数量一旦确定就不能更改；</li>
<li>默认一个索引创建5个主分片，并且分别为每个主分片创建一个副本</li>
</ol>
</li>
</ol>
</li>
<li>Replicas：备份或是副本。指对主分片的备份；
<ol>
<li>备份能提高系统的高可用性
<ol start="2">
<li>提高检索的并非性能：（可以理解为当主分片查询繁忙时，可以直接从副本中查询）</li>
<li>过多会增加系统的同步负担</li>
</ol>
</li>
</ol>
</li>
<li>Index：索引。索引由一个和多个分片组成，在使用中需要通过索引名称来作为集群中的唯一标识；</li>
<li>Type：类别。指索引内部的逻辑分区。通过type的名字，在索引內进行唯一标识。在查询时 ，如果没有该值吗，则表示需要在整个索引中查询（似乎是tag的意思？）</li>
<li>Document：文档。索引中的每一条数据叫做文档，与通过<code>_id</code> 在 <code>Type</code> 内进行唯一标识；</li>
<li>Settings：指集群内索引的定义信息，比如索引默认的分片数、副本数等。</li>
<li>Mapping：保存定义索引字段的存储类型、分词方式、是否存储等信息。类似 MySQL的表结构信息；
<ol>
<li>一般是动态识别的，不需要手动创建。
<ol start="2">
<li>一个索引的 Mapping 一旦创建，若已经存储量数据，就不可以修改了。</li>
</ol>
</li>
</ol>
</li>
<li>Analyzer：表示字段分词方式的定义。一个 analyzer通常由 一个Tokenizer 和0到多个 Filter 组成。</li>
</ul>
<p>附录：与关系型数据库的对应</p>
<table>
<thead>
<tr>
<th style="text-align:left">ES</th>
<th style="text-align:left">关系型数据库</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">索引 Indices</td>
<td style="text-align:left">库database</td>
</tr>
<tr>
<td style="text-align:left">类型 Types</td>
<td style="text-align:left">表 Table</td>
</tr>
<tr>
<td style="text-align:left">文档 Documents</td>
<td style="text-align:left">行 Rows</td>
</tr>
<tr>
<td style="text-align:left">字段 Fields</td>
<td style="text-align:left">列 Columns</td>
</tr>
<tr>
<td style="text-align:left">映射 Mapping</td>
<td style="text-align:left">Schema</td>
</tr>
<tr>
<td style="text-align:left">Put/Post/delete/update/Get</td>
<td style="text-align:left">增删改查</td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hwang's Read List - EP 19]]></title>
        <id>https://hwang.top/post/hwangs-read-list-ep-19/</id>
        <link href="https://hwang.top/post/hwangs-read-list-ep-19/">
        </link>
        <updated>2021-03-17T06:50:31.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>这是不定期更新的个人阅读目录，在我的输入流程中，文章从RSS以及其他不同平台获取，这里存放那些我好好看了的文章。</p>
</blockquote>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzA3MTY0MTQzNg==&amp;mid=2650248311&amp;idx=1&amp;sn=15db275041e5ca4dc7c2d14db6416f35&amp;chksm=87294444b05ecd527da3042d9c1bc05cc88c0caa740043b09e2b7f4758544048a84647329e57#rd">独家对话浑水创始人：调查欢聚持续一年，接下来百度有两个选择 | 棱镜</a></p>
<blockquote>
<p>十年前我们去调查中国公司，可能就是数一数卡车的数量，近些年，我们发现了所谓的“科技造假”,甚至会出现相关产业。</p>
</blockquote>
<p><a href="https://mp.weixin.qq.com/s?__biz=MjgzMTAwODI0MA==&amp;mid=2651972937&amp;idx=1&amp;sn=d292a547aab13454b9f9d5d129b969b7&amp;chksm=9b6773d6ac10fac0345058749edffe429a439924e4d5f01d5f0f0fcdaeb2cd48d13d4c657eaa#rd">Mac 笑脸、像素字体、微软纸牌…苹果第一代设计师有多厉害？</a> &gt; 苹果早期的设计故事。</p>
<p><a href="https://blog.yitianshijie.net/2021/02/20/why-did-paul-graham-stop-painting/">为什么 Paul Graham 不画画了？</a></p>
<blockquote>
<p>Paul Graham 最新的这篇「我的前半生」（What I Worked On）颇堪玩味。他的前半生谈不上…</p>
</blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/28506976">从《全球目录》到热爱生活</a></p>
<blockquote>
<p>最近看了李如一老师关于《全球目录》杂志的几篇文章，产生了一些有意思的想法，所以记录下来。 《全球目录》这个名字，相信大多数人都是从乔布斯那里听来的。乔布斯 2005 年在斯坦福大学的那场著名演讲中，最后提…</p>
</blockquote>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzA5ODY2NDIyNQ==&amp;mid=2651977911&amp;idx=1&amp;sn=35fea1ba9ddbfca8e24fc83c4f2e32e1&amp;chksm=8b6b72f9bc1cfbefd7ef5ffdbe6711754171a9c374aaa1d4d3d8a7a44e305e73a69d9bd2d15f#rd">项飙谈996和异化：城市新穷人不是经济穷人，是意义贫困 | 专访</a></p>
<blockquote>
<p>不想做“工具人”的我们，和项飙老师聊了聊。</p>
</blockquote>
<p><a href="https://telegra.ph/Notion-is-a-UX-Disaster-12-23">Notion is a UX Disaster</a></p>
<blockquote>
<p>I am an unfortunate user of Notion. I have to use it in my day to day job because it is the tool of my company choice. I suffer every time I'm doing anything in it. Maybe it's just me. But I honestly don't think so.<br>
It's been a year since my company migrated to Notion from Confluence. And I'm quite confident now that these UX quirks I'm going to talk about won't go. They are built into Notion DNA. The UX issues are so complex and broad that I don't even know where should I start. Also, I'm not a user experience…</p>
</blockquote>
<p><a href="https://sspai.com/post/65141">你的下一个应用，未必是程序 - 少数派</a></p>
<blockquote>
<p>与其关注应用是什么，不如关注应用能做到什么、是如何做到的、有没有尊重我们的选择和权利。</p>
</blockquote>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzIyMDQ0OTI4Ng==&amp;mid=2247500196&amp;idx=1&amp;sn=b60fcf7fba2761a58ecfada8b9cf8b70&amp;chksm=97c95ecda0bed7db645da0bf52caadc6af27e5b42dbff42764048ce44e1212bd7bc00d7dbee2#rd">成为「受害者」后，我们对「文化挪用」的理解更透彻了吗？</a></p>
<blockquote>
<p>一种去政治的文化政治真的有效么？</p>
</blockquote>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzUxOTA3MzMzOQ==&amp;mid=2247530843&amp;idx=1&amp;sn=3278fa26cc0874459d0ba9666476b948&amp;chksm=f9fd020fce8a8b19dca2a2c91a387e7c617f54d8d8f8a8b03eee29e07d8dcd53e08d8fa0a364#rd">芯征程丨苹果造芯三十年</a></p>
<blockquote>
<p>从造芯惨败到万亿帝国，苹果用了三十年。</p>
</blockquote>
<p><a href="https://sspai.com/post/64725">自由翻译的效率进阶之路 - 少数派</a></p>
<blockquote>
<p>「本文参与少数派2020年度征文——高效行动派」2020年上半年，由于疫情的原因，我大多数时间都在家办公。由于省下了平日两个多小时的通勤时间，加之也没有其他的外出活动，一瞬间多出了许多在家的空闲时间。 ...</p>
</blockquote>
<p><a href="https://flomoapp.com/privacy">隐私协议 - flomo · 浮墨笔记</a></p>
<blockquote>
<p>像发微博一样记笔记，记录你想法的川流。全平台覆盖，还支持微信服务号输入。<br>
<a href="https://mp.weixin.qq.com/s?__biz=MzIwMDgxNjkzNA==&amp;mid=2247499974&amp;idx=1&amp;sn=c45b04c508bde7ad64ca70a8b95fc4ac&amp;chksm=96f5e08fa1826999427151a892ae3f6d78e076aa7046ea8efdce9a9b391efa6beab02dbba17d#rd">WeWork有料员工大公开！他的“开挂”系人生，才不只是剧本好。</a><br>
👀 这篇推文不仅好看，还有点好听👂</p>
</blockquote>
<p><a href="https://sspai.com/post/65217">浅谈 Instagram 的聊天功能和无压力社交 - 少数派</a></p>
<blockquote>
<p>Instagram:从图片发布到聊天工具的蜕变</p>
</blockquote>
<p><a href="https://smoothdvd.medium.com/make-tabnine-work-great-again-on-apple-silicon-m1-f889f728ca53">Make Tabnine Great Again on Apple Silicon M1</a></p>
<blockquote>
<p>Microsft has released Visual Studio Code Insider version which supports Apple M1 chip after Apple announced new MacBook Air, Macbook Pro and Mac mini supercharged by Apple M1 chip. We can install the…</p>
</blockquote>
<p><a href="https://www.huxiu.com/article/408085.html">Clubhouse怎么在日本火起来了？再聊聊递爪这个产品</a></p>
<blockquote>
<p>clubhouse这几天在中国和日本都很火，但是火起来的路数并不同。根据社交网络和新闻，可以大致还原clubhouse在日本火起来的轨迹。实际上，clubhouse之所以在日本破圈，要归功于有些匪夷所思的第二阶段。而高规格的客厅和关系网无疑也增加了clubhouse的产品价值。推特上不时有知名人士表示自己注册了clubhouse，邀请粉丝来参加交流会。但是在中国，clubhouse显然仍处在第一阶段，即主要在VC和产品圈子内传播。clubhouse诞生于2020年4月，果壳孵化的递爪大概诞生在2019年夏</p>
</blockquote>
<p><a href="https://sspai.com/post/64647">命名数据网络，一个未来网络的可能性 - 少数派</a></p>
<blockquote>
<p>我们的故事要回到1974年，彼时计算机主要形式还是大型机，创造计算机行业历史的AppleI要在两年后才正式面世，而我们熟知的万维网（WorldWideWeb）在整整十五年后才会被伯纳斯-李爵士在他的《 ...</p>
</blockquote>
<p><a href="https://sspai.com/post/64593">2021，与真实世界重建联系的 8 个提议 - 少数派</a></p>
<blockquote>
<p>到底，这个世界仍建筑于实体之上。</p>
</blockquote>
<p><a href="https://iois.me/archives/10328.html">放弃 Kindle 后，我开始在 iPad Pro 读书 – Dailyio</a></p>
<p><a href="https://www.zaobao.com.sg/wencui/politic/story20210220-1125512">孔子学院受挫　中国官办海外机构有待李子柒打救？</a></p>
<blockquote>
<p>美国保守派校园新闻网站2月8日报道，美国前任总统特朗普试图制定一项政策，要求美国大学公布与孔子学园地方支部的合作，现任总统拜登在上任后数日内迅速地撤销政策。以目前中美关系而言，无论是特朗普抑或拜登当政，孔子学院可说始终是前途未卜，而扩展至中西阵营对垒，孔子学院的前景也是不甚明朗，例如瑞典便已陆续将境内孔院一一关闭。</p>
</blockquote>
<p><a href="https://www.tmtpost.com/5039805.html">当多抓鱼卖起二手衣，还有“豆瓣”内味儿吗？-钛媒体官方网站</a></p>
<blockquote>
<p>离豆瓣越来越远，离闲鱼越来越近。</p>
</blockquote>
<p><a href="https://juejin.cn/post/6937102296442470413">奇思妙想 CSS 文字动画</a></p>
<blockquote>
<p>本文将会和这篇 -- CSS 奇思妙想边框动画类似，讲一些文字效果，利用不同的属性搭配，实现各式各样的文字动效。 在写各种 DEMO 的时候，有的时候一些特殊的字体能更好的体现动画的效果。这里讲一个快速引入不同格式字体的小技巧。 当我们相中了一个我们喜欢的字体，它也提供了非常快…</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[经验分析策略精读--以 The Competitive Saving Motive: Evidence from Rising Sex Ratios and Savings Rates in China 为例（一）]]></title>
        <id>https://hwang.top/post/jing-yan-fen-xi-ce-lue-jing-du-yi-the-competitive-saving-motive-evidence-from-rising-sex-ratios-and-savings-rates-in-china-wei-li-yi/</id>
        <link href="https://hwang.top/post/jing-yan-fen-xi-ce-lue-jing-du-yi-the-competitive-saving-motive-evidence-from-rising-sex-ratios-and-savings-rates-in-china-wei-li-yi/">
        </link>
        <updated>2021-03-01T08:01:30.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>本文发布于<a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1614585178&amp;ver=2919&amp;signature=j1pxWxrSVN3ZrTzWic1k0Njnuhha7FB9Zt7W8miHLh5clc-2hmpkr7vPBuKy8WM2gAptc*KJY9sYk8KamCIsgBbWVWbektQo*wxTMS9d9qirI4TRmthdPkJPCA063g3Z&amp;new=1">数据seminar公众号</a></p>
</blockquote>
<p>毋庸讳言，当前经济学的潮流逐渐转向依托数据与计量分析的经验研究范式。<br>
主流经济学经验研究已经实现从相关分析到因果分析的跨步。计量经济学的发展使得经济学家能够通过对于调查数据的熟练使用，实现因果效应分析。那么具体是怎么做的呢？<br>
本文将就魏尚进、张晓波两位大牌教授（以下简称&quot;魏和张&quot;）关于中国持续增长的性别比例带来的竞争性储蓄动机的实证文章：The Competitive Saving Motive: Evidence from Rising Sex Ratios and Savings Rates in China 为例，解释经济学如何精妙使用各类数据和计量方法，实现因果关系的有效识别。</p>
<h2 id="一-构建逻辑"><strong>一、构建逻辑</strong></h2>
<p>经济学解释现象。张五常在《经济解释》中说：</p>
<blockquote>
<p>解释现象是需要非事实的抽象理论的。为什么事实的解释要牵涉到抽象的思想那方面去呢？答案是：事实的规律不能不言自明，自我解释。天下雨，天上一定有云 -- 这是现象的规律 -- 但雨的出现不能解释云的存在。小麦在泥土中生 -- 这是规律 -- 但泥土不能解释小麦。<br>
所以对于经济学来说，第一步需要做的就是指出现实：<br>
...the Chinese household savings as a share of disposal income nearly doubled from 16 percent in 1990 to 30 percent in 2007, it has caught special attention.<br>
魏和张在文章中指出1990-2007年，中国的储蓄率从16%增长到30%。这是一个十分显著和重要的现实。对于储蓄率的增长有许多现有的解释，但是为了排除这些&quot;竞争性&quot;理论，作者努力说明，此前关于储蓄动机的理论，面对中国如此之高的储蓄率其解释力都显不足。<br>
<img src="https://mmbiz.qpic.cn/mmbiz_jpg/n6RrVL6rxiaIs2ndPr95iabVzUocNms1YZ33ryoWiaLh4LZxNrw1gBcEg5eRUwjsHW2TqibkwgsgGJzszXBS0nsOsQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy"><br>
例如：生命周期理论认为，随着工作年龄人口占比的增加，储蓄会增长。但这与家庭层面数据相悖（ Chamon and Prasad 2010）。<br>
First, the life-cycle theory (Modigliani 1970; Modigliani and Cao 2004) predicts that the savings rate rises with the share of working age population in the total population. This explanation does not appear to be consistent with the proﬁle of savings at the household level (Chamon and Prasad 2010).<br>
逐一驳斥现有理论，指出这些理论对于现象的解释力不足，因此，需要去探寻新的「规律」。<br>
所以，第二步就是用探寻的「规律」去解释这个现象。也就是说，构建自己对于现象的解释逻辑。<br>
在本文中，魏和张认为：<br>
In this paper, we suggest that an alternative savings motive may be at work: people save in order to improve their relative standing in the marriage market.<br>
除了已有的储蓄动机外（生命周期理论、预防性储蓄、金融市场欠发达等），竞争性的储蓄动机是一个值得关注的储蓄动机。所谓竞争性储蓄动机就是指，人们为了能够在婚姻市场获得优势而进行储蓄。<br>
而一个从现实中抽离出来「规律」就必须有强有力的证据。数据的证据通过如下两个方面分析得来：1.描述性统计；2.计量经济分析。</p>
</blockquote>
<h2 id="二-描述性统计"><strong>二、描述性统计</strong></h2>
<p>在本文中，魏和张利用人口普查数据、2007年统计年鉴数据、CFPS数据和贵州调查数据等，做了如下描述性统计：</p>
<ol>
<li>首先，只能比较性别比和储蓄率的变化趋势：<br>
<img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="" loading="lazy"><br>
魏和张利用20年前的出生率作为性别比，利用2007年统计年鉴的储蓄率时序数据来做比较，将两者都标准化后得到上图。<br>
通过这张图，我们能够很直观的感受到，两者变化是接近的，相关系数为0.822。当然，这里的描述性统计是对两者关系的粗略呈现，只能作为一个不严谨的证据。</li>
<li>其次，利用2002年家庭收入项目（ICPSR）的问卷统计，得到了以下的储蓄动机自评表：<br>
<img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="" loading="lazy"><br>
可以看到，即便将建房/买房 这种可能与子女相关的因素（本文中，作者认为问卷调查提问时难以严格区分是否与子女相关故而将其归为不相关）归入不相关，与子女直接相关的比例依然高于不直接相关的比例，并且关于与子女直接相关的比例，有儿子的家庭也是高于有女儿的家庭。<br>
更具体的：</li>
</ol>
<ul>
<li>大多数储蓄行为与孩子有关。（The table shows that 92.2 percent of the son-households give at least one factor directly related to their son as their primary or secondary reason for savings）</li>
<li>在为孩子储蓄的差异上，男孩与女儿之间存在显著差异。（It is also telling to look at savings for children's weddings: 29.8 percent of son-families list savings for their son's wedding as the primary or secondary most important reason for savings versus only 18.3 percent of daughter-families who give the same answer.）</li>
<li>遗产和教育的性别比差异较小。<br>
此外：</li>
<li>还对四口家庭进行了比较，结果也是类似的。婚姻因素，一男孩一女孩多于只有女孩，有两个男孩的多于一男一女。</li>
</ul>
<blockquote>
<p>It is important to point out that these numbers do not directly reveal the intensity of savings for a given type of household. (For that, we will perform formal regression analyses.)<br>
这几点同样为本文的逻辑提供了证据。<br>
最后，利用贵州省调查的数据，绘制了新郎与新娘结婚前2年和婚后4年的储蓄水平（结婚那一年横坐标0，婚前为负，婚后为正）。<br>
<img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="" loading="lazy"><br>
图显示了婚前一年是储蓄最高的一年，婚后储蓄开始下降。</p>
</blockquote>
<ul>
<li>（1）图形呈现倒V型，峰值在婚前1年。男性的储蓄率比女性的高50%。</li>
<li>（2）储蓄率在婚姻后会快速减少。说明有很大一部分储蓄在婚姻中被花掉了。</li>
<li>（3）新郎储蓄率在大多数情况都高于新娘，说明为结婚储蓄的话，新郎家庭储蓄率比新娘家庭更重要。<br>
当然，倒V型的图形，可能会被指责：性别比上升对于储蓄率总的影响可能是0，即性别比的上升，带来婚前储蓄上升，但是婚后被消耗掉了，所以总的效应为0。<br>
对于这个方面，原文中用文本说明加以保护：</li>
</ul>
<blockquote>
<p>While the inverse-V shape of the savings curve in ﬁgure 2 means that savings rates tend to decline after a wedding, it does not imply that the net consequence of a higher sex ratio on savings rates is zero. First, in a society with a positive population growth rate, the sum of the extra savings by families preparing for a wedding may grow faster than the sum of the dis-savings by postwedding families. Second, more impor- tantly, in response to a rising sex ratio, the entire savings curve is likely to shift upward, especially for households with a son. In addition, parents wish to leave a positive bequest for their children.<br>
即：</p>
</blockquote>
<ul>
<li>（1）在一个人口增长率为正的社会里，准备结婚的家庭额外储蓄的总和比婚后家庭的储蓄总和要多。</li>
<li>（2）更重要的是，随着性别比例的上升，竞争性的储蓄会导致整个储蓄曲线可能会向上移动，特别是对于有儿子的家庭。</li>
<li>（3）父母希望为孩子留下遗产而非欠债。<br>
以上3张图表是利用折线图、表格等方式做的描述性统计，利用数据引导人们初步接受文章提出的关于竞争性储蓄动机的可能性。但是光有描述性的统计显然不够的，更精彩的识别策略我们将在下次推文为大家详解。</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[好看又独特的头像哪里找？]]></title>
        <id>https://hwang.top/post/hao-kan-you-du-te-de-tou-xiang-na-li-zhao/</id>
        <link href="https://hwang.top/post/hao-kan-you-du-te-de-tou-xiang-na-li-zhao/">
        </link>
        <updated>2021-02-09T10:03:05.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>本文以发布于少数派：<a href="https://sspai.com/post/65026">https://sspai.com/post/65026</a><br>
推荐在少数派阅读</p>
</blockquote>
<figure data-type="image" tabindex="1"><img src="https://hwang.top/post-images/1612865105935.png" alt="" loading="lazy"></figure>
<p>最近 Clubhouse 的窜火，他们把自己活跃用户头像作为图标。头像在 Clubhouse 中扮演了很重要的角色，在一个 Room 里面，用户之间主要依靠头像做区分，同时许多 Room 会有基于某些头像的“模仿秀”（例如吸猫、皮卡丘等等）。</p>
<p>言归正传，如今那么多的社交网站，构建一个有趣又独特的头像就是一件值得认真对待的事情。那么有哪些网站可以帮助你构建一个独特的头像呢？</p>
<h2 id="用自已的头像">用自已的头像</h2>
<p>起初，在Clubhouse中，一个很大的特色就是许多人都会选择使用自己的照片作为头像，在各种 Room 中。那么如果想要自己的的照片作为头像，下面这些网站也许可以帮助到你：</p>
<h3 id="1-更换一个背景">1. 更换一个背景 🌌</h3>
<p>有的时候，一张好的照片，背景是杂乱的，那么你可以是使用<a href="https://pfpmaker.com"> pfpmaker</a> 这网站，轻松替换各种效果的背景。你要做的只是把头像照片拖入到网页。</p>
<p>如果不想直接上传自己的照片，还可以点击 「Try with Emoji 🤪」，使用emoji表情先看看效果：</p>
<hr>
<p>全文请前往少数派：<a href="https://sspai.com/post/65026">https://sspai.com/post/65026</a> 阅读哦</p>
]]></content>
    </entry>
</feed>