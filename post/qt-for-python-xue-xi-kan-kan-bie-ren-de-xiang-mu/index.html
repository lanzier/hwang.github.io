<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Qt for Python å­¦ä¹  â€”â€” çœ‹çœ‹åˆ«äººçš„é¡¹ç›® | Hwang&#39;s Blog</title>
<meta name="description" content="æ¬¢è¿æ¥åˆ° Hwang çš„å°åšå®¢ <br>
ğŸ“š åšå®¢é€šè¿‡ Gridea æ­å»ºï¼Œæ„Ÿè°¢ Gridea çš„å…è´¹æœåŠ¡ï¼›è¹­åœ¨ Githubï¼Œæ„Ÿè°¢ Github.com æä¾›çš„æœåŠ¡å™¨èµ„æº  <br>
âœï¸ æ–‡ç« ç”± Hwangï¼Œåœ¨ Ulysses ä¸Šå®Œæˆå†™ä½œ/äº¦æˆ–è€…æ‹·è´<br>
ğŸ‘¨â€ğŸ¨ å°é¢ç”± Hwangï¼Œåœ¨ Figma ä¸Šå®Œæˆåˆ›ä½œ <br>
<span style="font-size:6px">
è¿™é‡Œæ˜¾ç„¶ä¸æ˜¯ä»€ä¹ˆæŠ€æœ¯åšå®¢ï¼Œä¹Ÿä¸ä¼šæœ‰å¤ªå¤šå€¼å¾—æœŸå¾…çš„å¹²è´§ã€‚
</span>" />
<link rel="shortcut icon" href="https://hwang.top/favicon.ico?v=1582024773094">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://hwang.top/styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://hwang.top">
  <img class="avatar" src="https://hwang.top/images/avatar.png?v=1582024773094" alt="">
  </a>
  <h1 class="site-title">
    Hwang&#39;s Blog
  </h1>
  <p class="site-description">
    æ¬¢è¿æ¥åˆ° Hwang çš„å°åšå®¢ <br>
ğŸ“š åšå®¢é€šè¿‡ Gridea æ­å»ºï¼Œæ„Ÿè°¢ Gridea çš„å…è´¹æœåŠ¡ï¼›è¹­åœ¨ Githubï¼Œæ„Ÿè°¢ Github.com æä¾›çš„æœåŠ¡å™¨èµ„æº  <br>
âœï¸ æ–‡ç« ç”± Hwangï¼Œåœ¨ Ulysses ä¸Šå®Œæˆå†™ä½œ/äº¦æˆ–è€…æ‹·è´<br>
ğŸ‘¨â€ğŸ¨ å°é¢ç”± Hwangï¼Œåœ¨ Figma ä¸Šå®Œæˆåˆ›ä½œ <br>
<span style="font-size:6px">
è¿™é‡Œæ˜¾ç„¶ä¸æ˜¯ä»€ä¹ˆæŠ€æœ¯åšå®¢ï¼Œä¹Ÿä¸ä¼šæœ‰å¤ªå¤šå€¼å¾—æœŸå¾…çš„å¹²è´§ã€‚
</span>
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Qt for Python å­¦ä¹  â€”â€” çœ‹çœ‹åˆ«äººçš„é¡¹ç›®
            </h2>
            <div class="post-info">
              <span>
                2018-12-07
              </span>
              <span>
                16 min read
              </span>
              
                <a href="https://hwang.top/tag/GY_B5UX_b" class="post-tag">
                  # qt for python
                </a>
              
                <a href="https://hwang.top/tag/Zf-hLAESr" class="post-tag">
                  # python
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://hwang.top/post-images/qt-for-python-xue-xi-kan-kan-bie-ren-de-xiang-mu.png" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <blockquote>
<p>picpong ä¸€ä¸ªPyQt å†™çš„å›¾åºŠåº”ç”¨ï¼›</p>
<p>é¡¹ç›®åœ°å€ï¼šhttps://github.com/shuoGG1239/PicPong</p>
</blockquote>
<!-- more -->
<h2 id="æ–‡ä»¶ç›®å½•">æ–‡ä»¶ç›®å½•</h2>
<pre><code>./PicPong-master
â”œâ”€â”€ ConfigWidget.py
â”œâ”€â”€ PicPong.py
â”œâ”€â”€ README.md
â”œâ”€â”€ UploadWidget.py
â”œâ”€â”€ ViewWidget.py
â”œâ”€â”€ asset
â”‚   â”œâ”€â”€ config.png
â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ view_hover.png
â”œâ”€â”€ main.py
â”œâ”€â”€ pyinstaller.py
â”œâ”€â”€ screen_capture.py
â”œâ”€â”€ shuoGG_re.ico
â”œâ”€â”€ ui_ConfigWidget.py
â”œâ”€â”€ ui_...//çœç•¥UI
â”œâ”€â”€ ui_ViewWidget.ui
â””â”€â”€ util
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ sm_util.py
    â””â”€â”€ system_util.py
</code></pre>
<h2 id="æ–‡ä»¶1-mainpy">æ–‡ä»¶1-main.py</h2>
<p>ç¨‹åºå…¥å£ï¼Œå°±20è¡Œä»£ç ã€‚<br>
from PyQt5.QtGui import QIcon<br>
from PyQt5.QtWidgets import QApplication</p>
<pre><code>from PicPong import PicPong

if __name__ == '__main__':
    import sys
    app = QApplication(sys.argv)
    mainWindow = PicPong()
    mainWindow.setWindowTitle('PicPong')
    mainWindow.setWindowIcon(QIcon('./asset/myicon.ico'))
    mainWindow.setStyleSheet(&quot;QFrame#WindowWithTitleBar{background: #33CCCC}&quot;)
    mainWindow.setStyleSheet(&quot;QWidget#uploadWidget{background: #FFFFFF}&quot;)
    # fixSize
    mainWindow.setSupportStretch(False)
    mainWindow.setMaxEnable(False)
    # ä¸ç„¶å¿«æ·é”®å¤±æ•ˆ
    mainWindow.mainwidget.setFocus()
    mainWindow.show()
    sys.exit(app.exec_())
</code></pre>
<p>è®¾ç½®mianWindowå®ä¾‹<br>
ç„¶åè®¾ç½®ä¸€äº›æ ·å¼ã€ico ç­‰å†…å®¹ã€‚<br>
ä¿®å¤ä¸€äº›å†…å®¹ã€‚</p>
<h2 id="æ–‡ä»¶2-picpongpy">æ–‡ä»¶2-PicPong.py</h2>
<p>å…±150è¡Œä»£ç ï¼Œä¸€ä¸ª <code>class</code> PicPong</p>
<h3 id="0-å¯¼å‡ºçš„åº“">0. å¯¼å‡ºçš„åº“</h3>
<pre><code>from PyQt5.QtCore import pyqtSlot, QSize, QRect, Qt
from PyQt5.QtGui import QPixmap, QIcon
from PyQt5.QtWidgets import QWidget
from QCandyUi.CandyWindow import colorful

import ui_PicPong
from ConfigWidget import ConfigWidget
from UploadWidget import UploadWidget
from ViewWidget import ViewWidget
from screen_capture import CaptureScreen
</code></pre>
<ul>
<li>Qt ç›¸å…³å†…å®¹ï¼Œä¸å¤ªç”¨çš„æ˜¯ QRectï¼š
<blockquote>
<p>QRectç±»å®šäº†å¹³é¢ä¸Šçš„çŸ©å½¢ã€‚ ä¸€ä¸ªçŸ©å½¢åœ¨å†…éƒ¨æ˜¯ç”±å·¦ä¸Šè§’å’Œå³ä¸‹è§’è¡¨ç¤ºçš„ï¼Œä½†æ˜¯é€šå¸¸å®ƒæ‰€è¡¨è¾¾åˆ°æ˜¯ä¸€ä¸ªå·¦ä¸Šè§’å’Œä¸€ä¸ªå¤§å°ã€‚</p>
</blockquote>
</li>
<li>QCandyUi ï¼šä¸€ä¸ªUIæ ·å¼åº“ï¼Œå¿«é€Ÿæ·»åŠ UIï¼šhttps://github.com/shuoGG1239/QCandyUi</li>
<li>ConfigWidgetã€UploadWidgetã€ViewWidgetï¼š è‡ªå®šä¹‰çš„ Widget å†…å®¹</li>
<li>screen_captureï¼š æˆªå›¾åŠŸèƒ½</li>
</ul>
<p>æ¥ç€æ˜¯é™æ€èµ„æºè·¯å¾„ï¼š</p>
<pre><code># èµ„æºè·¯å¾„
ROOT_URL = './asset/'
CUT_ICON_URL = 'scissors.png'
CONFIG_ICON_URL = 'config.png'
SET_ICON_URL = 'set.png'
VIEW_ICON_URL = 'view.png'
OPEN_FILE_ICON_URL = 'file.png'
FRAME_FILE_ICON_URL = 'frame.png'
</code></pre>
<p>æŒ‰è§„èŒƒè¿™é‡Œçš„å˜é‡éœ€è¦å¤§å†™ã€‚</p>
<hr>
<pre><code>@colorful('blueGreen')
class PicPong(QWidget):
</code></pre>
<p><code>@colorful('blueGreen')</code> QCandyâ€”UI æä¾›çš„è£…é¥°å™¨ï¼Œèƒ½å¤Ÿå¿«é€Ÿçš„åˆ›å»ºé¢œè‰²UIã€‚</p>
<h3 id="1-åˆå§‹åŒ–">1. åˆå§‹åŒ–ï¼š</h3>
<pre><code>QWidget.__init__(self)
self.ui = ui_PicPong.Ui_picPong()
self.ui.setupUi(self)
</code></pre>
<p>UIåˆå§‹åŒ–</p>
<pre><code>self.widgetUpload = UploadWidget(self)
self.widgetUpload.setGeometry(QRect(41, 0, 450, 360))

self.widgetView = ViewWidget(self)
self.widgetView.setGeometry(QRect(41, 0, 450, 360))
self.widgetView.hide()
self.widgetConfig = ConfigWidget(self)
self.widgetConfig.setGeometry(QRect(41, 0, 450, 360))
self.widgetConfig.hide()
</code></pre>
<p>å°†widgetè®¾ç½®åœ¨å¸ƒå±€çš„ä½ç½®ä¸­ <code>self.widgetUpload = UploadWidget(self)</code> ä¸Šé¢import çš„å†…å®¹ widget åˆå§‹åŒ–ä¸º ä¼ å…¥ <code>self</code> ç±»ã€‚ hide å…¶ä»–çš„ widgetã€‚</p>
<pre><code>self.widgetUpload.signal_img.connect(self.widgetView.slot_recv_img)
self.widgetUpload.signal_response.connect(self.widgetView.slot_recv_resp)
self.widgetUpload.signal_fail.connect(self.__slot_showTip)
</code></pre>
<p>ä¿¡å·æ§½ç»‘å®šï¼Œå‡ä¸ºè‡ªå®šä¹‰ä¿¡å·ï¼Œå…·ä½“éœ€è¦å‚è§ uploadwidget å†…çš„å†…å®¹ã€‚<br>
ä¸»è¦æ˜¯3ä¸ªå†…å®¹ï¼Œä¸€ä¸ªæ˜¯å›¾ç‰‡ï¼Œä¸€ä¸ªæ˜¯å“åº”ï¼Œä¸€ä¸ªæ˜¯å¤±è´¥çš„å›å¤</p>
<pre><code>@pyqtSlot(str)
def __slot_showTip(self, msg):
        self.parent().showTip(msg, 'red')
</code></pre>
<p>ç»‘å®šæ˜¾ç¤ºä¿¡æ¯çš„å’¨è¯¢</p>
<pre><code>self.__init_style()
self.ui.pushButtonCut.setToolTip('ctrl+shift+alt+F8')
</code></pre>
<p>æ¥ä¸‹æ¥æ˜¯åˆå§‹åŒ–UI<br>
è®¾ç½®æŒ‰é’®æç¤º</p>
<h3 id="2ç¾åŒ–ç›¸å…³">2.ç¾åŒ–ç›¸å…³ï¼š</h3>
<pre><code>def __init_style(self):
    self.ui.widgetSide.setStyleSheet(&quot;QWidget{background: #33CCCC;border:none}&quot;)
    self.widgetUpload.setStyleSheet(&quot;QWidget#uploadWidget{background: #FFFFFF;border:none}&quot;)
    self.__btn_style3()
</code></pre>
<p>è®¾ç½® styleSheetï¼Œè¿›è¡Œ __btn_style3()</p>
<pre><code>def __btn_style3(self):
    self.beautify_button3(self.ui.pushButtonUp, ROOT_URL, 'up.png', 'up_hover.png', 'up.png', 'up.png')
    self.beautify_button3(self.ui.pushButtonView, ROOT_URL, 'view.png', 'view_hover.png', 'view.png', 'view.png')
    self.beautify_button3(self.ui.pushButtonCut, ROOT_URL, 'scissors.png', 'scissors_hover.png', 'scissors.png',
                            'scissors.png')
    self.beautify_button3(self.ui.pushButtonConfig, ROOT_URL, 'config.png', 'config_hover.png', 'config.png',
                            'config.png')
</code></pre>
<p>è¿™é‡Œå‡ä¸ºè¿è¡Œ <code>self.beautify_button3()</code></p>
<pre><code> def beautify_button3(self, button, root, norm, hover, press, disable):
        qss = str()
        qss += &quot;QPushButton{background:transparent; background-image:url(%s); border:none}&quot; % (
                root + norm)
        qss += &quot;QPushButton:hover{background:transparent; background-image:url(%s)}&quot; % (
                root + hover)
        qss += &quot;QPushButton:pressed{background:transparent; background-image:url(%s)}&quot; % (
                root + press)
        qss += &quot;QPushButton:disabled{background:transparent; background-image:url(%s)}&quot; % (
                root + disable)
        button.setStyleSheet(qss)
        button.setText('')
</code></pre>
<p>ä»¥ä¸Šå‡ä¸ºè®¾ç½®æŒ‰é’®æ ·å¼</p>
<hr>
<h3 id="3æŒ‰é’®åŠŸèƒ½">3.æŒ‰é’®åŠŸèƒ½</h3>
<ol>
<li>
<p>pushButtonUp çš„ clicked äº‹ä»¶ï¼š</p>
<p>@pyqtSlot()<br>
def on_pushButtonUp_clicked(self):<br>
self.widgetUpload.show()<br>
self.widgetConfig.hide()<br>
self.widgetView.hide()<br>
ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œæ˜¾ç¤º widgetUploadï¼Œéšè—å…¶ä»–çš„ widget</p>
</li>
<li>
<p>pushButtonCut çš„ clicked äº‹ä»¶ï¼š</p>
<p>@pyqtSlot()<br>
def on_pushButtonCut_clicked(self):<br>
self.minimize()<br>
self.capture = CaptureScreen()<br>
self.capture.signal_complete_capture.connect(self.__slot_screen_capture)</p>
</li>
</ol>
<ul>
<li>
<p>å…ˆæœ€å°åŒ–ä¸»çª—å£ï¼Œè§ minimize å‡½æ•°ï¼š</p>
<p>def minimize(self):<br>
if self.widgetConfig.minWhenCut:<br>
self.parentWidget().showMinimized()</p>
</li>
<li>
<p>å®ä¾‹åŒ– <code>CaptureScreen()</code></p>
</li>
<li>
<p>ç»‘å®šè‡ªå®šä¹‰ä¿¡å·æ§½<code>self.capture.signal_complete_capture.connect(self.__slot_screen_capture)</code></p>
</li>
</ul>
<p>è€Œ<code>self.__slot_screen_capture</code>ï¼Œå¦‚ä¸‹ï¼š<br>
@pyqtSlot(QPixmap)<br>
def __slot_screen_capture(self, pixmap):<br>
temp_img_path = 'screenShot.png'<br>
pixmap.save(temp_img_path, 'png')<br>
self.widgetUpload.run_upload_async(temp_img_path)<br>
self.widgetUpload.signal_img.emit(pixmap)<br>
æ¥å—<code>QPixmap</code> å¯¹è±¡ï¼›</p>
<ul>
<li>å®šä¹‰æ–‡ä»¶åç§° <code>screenShot.png</code></li>
<li>ä¿å­˜ä¸ºpngï¼Œè°ƒç”¨äº† QPixmap çš„ save æ–¹æ³•ï¼š<code>pixmap.save(temp_img_path, 'png')</code></li>
<li>è¿è¡Œ<code>self.widgetUpload</code> çš„ <code>run_upload_async(temp_img_path)</code>æ–¹æ³•ï¼ˆè¯¥æ–¹æ³•è´Ÿè´£å¼€è¿›ç¨‹ä¸Šä¼ ï¼Œç„¶åæ˜¾ç¤ºåŠ¨ç”»ï¼‰ï¼Œç„¶åå‘é€è‡ªå®šä¹‰ä¿¡å·<code>signal_img.emit(pixmap)</code>ï¼Œè¯¥ä¿¡å·ç»‘å®šäº†ï¼š<code>self.widgetUpload.signal_img.connect(self.widgetView.slot_recv_img)</code> éœ€è¦å‚è€ƒ widgetViewä¸­çš„å‡½æ•°ï¼›</li>
</ul>
<ol start="3">
<li>
<p>pushButtonView çš„ clicked åŠ¨ä½œ<br>
æ˜¾ç¤º widgetViewï¼Œéšè—å…¶ä»–çš„ widgetã€‚</p>
</li>
<li>
<p>pushButtonConfig çš„ clickedåŠ¨ä½œ<br>
ä¸€æ ·æ˜¯æ˜¾ç¤ºwidget</p>
</li>
</ol>
<h3 id="é”®ç›˜äº‹ä»¶">é”®ç›˜äº‹ä»¶</h3>
<pre><code>def keyPressEvent(self, e):
</code></pre>
<p>é”®ç›˜äº‹ä»¶ï¼Œä¸æ˜¯å¾ˆä¼šï¼Œä¸‹æ¬¡å†å­¦ã€‚</p>
<h2 id="æ–‡ä»¶3-uploadwidgetpy">æ–‡ä»¶3 UploadWidget.py</h2>
<pre><code>import json
import os
import threading

from PyQt5.QtCore import pyqtSlot, QFileInfo, pyqtSignal, QSize
from PyQt5.QtGui import QMovie, QPixmap, QIcon
from PyQt5.QtWidgets import QWidget, QFileDialog, QLabel

import ui_UploadWidget
from util import sm_util
from util import system_util
`
</code></pre>
<p>å€’å…¥å†…ç½®åº“ï¼ŒQtç›¸å…³åº“ä»¥åŠ è‡ªå·±å†™çš„ util åŒ…</p>
<p>å¼€å§‹ä¾ç„¶æ˜¯å…¨å±€è·¯å¾„ã€‚</p>
<h3 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h3>
<p>å…ˆå®šä¹‰äº†å‡ ä¸ªä¿¡å·æ§½ï¼š<br>
class UploadWidget(QWidget):<br>
signal_fail = pyqtSignal(str)<br>
signal_response = pyqtSignal(str)  # småº”ç­”ä¿¡å·<br>
signal_img = pyqtSignal(QPixmap)<br>
ç¬¬ä¸€ä¸ªæ˜¯å¤±è´¥æ—¶çš„ä¿¡å·ï¼Œæ¥å— str å­—ç¬¦ä¸²<br>
ç¬¬äºŒä¸ªæ˜¯å“åº”ï¼Œæ¥å—strå­—ç¬¦ä¸²<br>
ç¬¬ä¸‰ä¸ªæ˜¯æ¥å— QPixmapå¯¹è±¡</p>
<pre><code>  def __init__(self, parent):
    QWidget.__init__(self, parent)
    self.ui = ui_UploadWidget.Ui_uploadWidget()
    self.ui.setupUi(self)
    self.setAcceptDrops(True)
    self.ui.pushButtonUpload.setAcceptDrops(False)
    self.signal_response.connect(self.__slot_sm_response)
    self.__init_loading_gif()
    self.__init_style()
</code></pre>
<p>åˆå§‹åŒ–UIï¼Œä¼ å…¥äº†ä¸€ä¸ª parent å‚æ•°ã€‚<br>
è®¾ç½®å…è®¸æ‹–æ‹½ã€‚ä¸å…è®¸æŒ‰é’® .ui.pushButtonUpload.æ‹–æ‹½ã€‚<br>
ç»‘å®šä¿¡å·åˆ°æ§½çš„ï¼Œæ§½å‡½æ•° self.__slot_sm_responsã€‚<br>
åˆå§‹åŒ–åŠ è½½åŠ¨ç”»ï¼Œåˆå§‹åŒ–æ ·å¼ï¼š</p>
<p>åˆå§‹åŒ–styleï¼š<br>
def __init_style(self):<br>
&quot;&quot;&quot;<br>
å¸¦buttonå¤–å£³çš„imageButton<br>
:return:<br>
&quot;&quot;&quot;<br>
self.setStyleSheet(&quot;QWidget#widgetView{background: #FFFFFF;border:none}&quot;)<br>
self.__btn_style3()</p>
<p>è¿™é‡Œé¢<code>self.__btn_style3()</code>:<br>
def __btn_style3(self):<br>
&quot;&quot;&quot;<br>
ä¸‰æ€button<br>
:return:<br>
&quot;&quot;&quot;<br>
self.beautify_button3(self.ui.pushButtonUpload, ROOT_URL, 'upload.png', 'upload_hover.png', 'upload.png',<br>
'upload.png')</p>
<pre><code>    def beautify_button3(self, button, root, norm, hover, press, disable):
        qss = str()
        qss += &quot;QPushButton{background:transparent; background-image:url(%s); border:none}&quot; % (
                root + norm)
        qss += &quot;QPushButton:hover{background:transparent; background-image:url(%s)}&quot; % (
                root + hover)
        qss += &quot;QPushButton:pressed{background:transparent; background-image:url(%s)}&quot; % (
                root + press)
        qss += &quot;QPushButton:disabled{background:transparent; background-image:url(%s)}&quot; % (
                root + disable)
        button.setStyleSheet(qss)
        button.setText('')
</code></pre>
<p>åˆå§‹åŒ– åŠ è½½åŠ¨ç”»</p>
<pre><code>    def __init_loading_gif(self):
        &quot;&quot;&quot;
        åˆå§‹åŒ–loadingåŠ¨ç”»
        :return:
        &quot;&quot;&quot;
        gif = QMovie(ROOT_URL + LOADING_GIF_URL)
        gif.start()
        x, y = 190, 110
        self.loadingLabel = QLabel(self)
        self.loadingLabel.setMovie(gif)
        self.loadingLabel.adjustSize()
        self.loadingLabel.setGeometry(x, y, self.loadingLabel.width(), self.loadingLabel.height())
        self.loadingLabel.setVisible(False)
</code></pre>
<p>è¿™ä¸ªåˆå§‹åŒ–å‡½æ•°ï¼Œç”Ÿæˆäº†ä¸€ä¸ª çˆ¶å¯¹è±¡ä¸º 'self' çš„ <code>self.loadingLabel</code> QLabel çš„å¯¹è±¡ã€‚</p>
<h3 id="æŒ‰é’®ä¸ä¿¡å·">æŒ‰é’®ä¸ä¿¡å·</h3>
<ol>
<li>
<p>pushButtonUpload çš„ clicked</p>
<pre><code> @pyqtSlot()
 def on_pushButtonUpload_clicked(self):
     self.ui.lineEdit.clear()
     img_full_path = QFileDialog.getOpenFileName()[0]
     if img_full_path is None or img_full_path == '':
         return
     _, name = os.path.split(img_full_path)
     self.signal_img.emit(QPixmap(img_full_path))
     self.run_upload_async(img_full_path)
</code></pre>
</li>
</ol>
<ul>
<li>
<p><code>self.ui.lineEdit.clear()</code> self.ui æ˜¯ ui_uploadWidget çš„ uiã€‚æ¸…é™¤ lineEditã€‚</p>
</li>
<li>
<p><code>img_full_path = QFileDialog.getOpenFileName()[0]</code> æ‰“å¼€ GUI æ–‡ä»¶é€‰æ‹©å™¨ ï¼ˆQFileDialogï¼‰ è·å¾—æ‰“å¼€çš„æ–‡ä»¶è·¯å¾„ã€‚ <code>.getOpenFileName()[0]</code> åˆ‡å‡ºæ¥çš„å°±æ˜¯æ–‡ä»¶è·¯å¾„äº†ã€‚<br>
-<code>if img_full_path is None or img_full_path == '':</code> æ£€æŸ¥éç©ºã€‚å¦‚æœæ˜¯ç©ºçš„è¯ return ï¼Œç›´æ¥è·³è¿‡ã€‚<br>
-<code>_, name = os.path.split(img_full_path)</code> æ²¡æœ‰<br>
-<code>self.signal_img.emit(QPixmap(img_full_path))</code> å‘é€ä¿¡å·<br>
-<code>self.run_upload_async(img_full_path)</code> è¿è¡Œä¸Šä¼ åŠ¨ä½œï¼Œä¸Šä¼ åŠ¨ä½œä¸Šé¢ä»¥åŠè§£é‡Šè¿‡æ¥ã€‚</p>
<pre><code>  @pyqtSlot(str)
  def __slot_sm_response(self, resp_json):
      self.loadingLabel.hide()
      if resp_json is not '':
          ret = json.loads(resp_json)
          md_image = '![' + ret['filename'] + '](' + ret['url'] + ')'
          self.ui.lineEdit.setText(md_image)
          system_util.set_clipboard_text(md_image)
</code></pre>
</li>
<li>
<p><code>self.loadingLabel.hide()</code> éšè—åŠ è½½é¡¹</p>
</li>
<li>
<p><code>if resp_json is not '':</code> ä¼ å…¥å‚æ•°ä¸ä¸ºç©ºï¼š</p>
</li>
<li>
<p>è¯»å–å­—ç¬¦ä¸²ä¸ºä¸ºdictï¼Œå‘½åretï¼›</p>
</li>
<li>
<p>md_image: md çš„å­—ç¬¦ä¸²æ¨¡æ¿ï¼›</p>
</li>
<li>
<p>å°†lineEdit çš„æ–‡æœ¬è®¾ç½®ä¸º md_image</p>
</li>
<li>
<p>system_util.set_clipboard_text(md_image) æ‹·è´åˆ°å‰ªè´´æ¿ã€‚</p>
</li>
</ul>
<blockquote>
<p>è¿™é‡Œæ³¨æ„ä¸‹ util ä¸‹çš„æ–‡ä»¶ç»“æ„ï¼š<br>
util å†…æœ‰ä¸€ä¸ªç©ºçš„<code>__init__.py</code>æ–‡ä»¶ï¼Œå¯¼å…¥æ—¶æ‰§è¡Œã€‚<br>
<code>system_util.py</code> å†…æ²¡æœ‰class ç±»ï¼Œéƒ½æ˜¯å‡½æ•°ã€‚<br>
è¿™æ ·å¯¼å…¥æ—¶å¯ä»¥é¿å…å®ä¾‹åŒ–</p>
</blockquote>
<pre><code>   def dragEnterEvent(self, event):
        if (event.mimeData().hasUrls()):
            event.acceptProposedAction()

    def dragMoveEvent(self, event):
        if (event.mimeData().hasUrls()):
            event.acceptProposedAction()

    def dropEvent(self, event):
        if (event.mimeData().hasUrls()):
            self.ui.lineEdit.clear()
            urlList = event.mimeData().urls()
            fileInfo = QFileInfo(urlList[0].toLocalFile())
            img_full_path = fileInfo.filePath()
            self.signal_img.emit(QPixmap(img_full_path))
            self.run_upload_async(img_full_path)
            event.acceptProposedAction()
</code></pre>
<p>æ‹–æ‹½åŠ¨ä½œï¼Œå‰é¢ä¸¤ä¸ªè‡³æ¥å—mimeData() å†…å¸¦æœ‰ Urlsçš„å†…å®¹ã€‚<br>
<code>def dropEvent(self, event):</code> ä¸ºéœ€è¦æ‰§è¡Œçš„åŠ¨ä½œï¼š</p>
<ul>
<li>æ¸…ç† lineEditï¼›</li>
<li>è·å– Url list</li>
<li>è·å–æ–‡ä»¶ä¿¡æ¯ï¼šfileInfo = QFileInfo(urlList[0].toLocalFile())</li>
<li>è·å–å›¾ç‰‡è·¯å¾„ï¼š img_full_path = fileInfo.filePath()</li>
<li>å‘é€ä¿¡å·ï¼šself.signal_img.emit(QPixmap(img_full_path))</li>
<li>è¿è¡Œä¸Šä¼ èƒŒæ™¯åŠ¨ä½œï¼›</li>
<li>event.acceptProposedAction() å®Œæˆæ‹–æ”¾åŠ¨ä½œã€‚</li>
</ul>
<h2 id="æ–‡ä»¶4-viewwidgetpy">æ–‡ä»¶4 ViewWidget.py</h2>
<h3 id="0åˆå§‹åŒ–">0.åˆå§‹åŒ–</h3>
<pre><code>    def __init__(self, parent):
        QWidget.__init__(self, parent)
        self.ui = ui_ViewWidget.Ui_widgetView()
        self.ui.setupUi(self)
        self.del_url = str()
</code></pre>
<p>å‰ä¸‰è¡Œï¼Œåˆå§‹åŒ–UI</p>
<ul>
<li><code>self.del_url = str()</code> åˆå§‹åŒ–ä¸€ä¸ªå­—ç¬¦ä¸²</li>
</ul>
<h3 id="1ä¿¡å·æ§½å‡½æ•°">1.ä¿¡å·æ§½å‡½æ•°ï¼š</h3>
<p>slot_recv_imgï¼Œæ¥æ”¶ä¸€ä¸ª QPixmap å¯¹è±¡ã€‚<br>
@pyqtSlot(QPixmap)<br>
def slot_recv_img(self, pixmap):<br>
self.__set_image(pixmap)</p>
<p>å¯¹ QPixmap æ‰§è¡Œ__set_image()æ–¹æ³•ï¼š</p>
<pre><code>    def __set_image(self, pixmap):
        &quot;&quot;&quot;
        pixmapé€‚åº”label
        :param label:
        :param pixmap:
        :return:
        &quot;&quot;&quot;
        label = self.ui.labelImage
        if pixmap.width() &gt; self.ui.labelImage.width() or pixmap.height() &gt; self.ui.labelImage.height():
            label.setPixmap(pixmap.scaled(label.width(), label.height(), Qt.KeepAspectRatio))
        else:
            label.setPixmap(pixmap)
</code></pre>
<p>è¿™é‡Œé¦–å…ˆæ˜¯åˆå§‹åŒ–äº†ä¸€ä¸ª labelImage å¯¹è±¡ï¼Œåœ¨ UI æ–‡ä»¶ä¸­ï¼š<br>
self.labelImage = QtWidgets.QLabel(widgetView)<br>
self.labelImage.setGeometry(QtCore.QRect(18, 10, 411, 261))<br>
self.labelImage.setFrameShape(QtWidgets.QFrame.Box)<br>
self.labelImage.setText(&quot;&quot;)<br>
self.labelImage.setAlignment(QtCore.Qt.AlignCenter)<br>
self.labelImage.setObjectName(&quot;labelImage&quot;)<br>
è¿™æ˜¯ä¸€ä¸ªçˆ¶ç±»æ˜¯ <code>widgetView</code> çš„ <code>QLabel</code> å¯¹è±¡ã€‚<br>
ä¹‹åæ¯”è¾ƒä¼ å…¥çš„ QPixmap å’Œ Qlabel å¯¹è±¡çš„å®½åº¦ã€é«˜åº¦ï¼šå¦‚æœä¼ å…¥å¤ªå¤§ï¼Œåˆ™ä»¥ç¼©ç•¥å›¾è®¾ç½®QLabelå¯¹è±¡ã€‚</p>
<hr>
<pre><code>    @pyqtSlot(str)
    def slot_recv_resp(self, resp_json):
        if resp_json is not '':
            ret = json.loads(resp_json)
            self.del_url = ret.get('delete')
</code></pre>
<p>æ¥ç€ï¼šslot_recv_resp ä¿¡å·æ§½æ¥å— ä¸€ä¸ª json æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚å¦‚æœéç©ºï¼Œåˆ™ï¼š<br>
æ”¹ä¸ºå­—å…¸ï¼Œè®¾ç½® self.del_url ä¸º å­—å…¸ä¸­çš„ 'delete' æ–‡æœ¬ã€‚</p>
<hr>
<p>ç„¶åæ˜¯ä¸€ä¸ªåˆ é™¤æŒ‰é’®ï¼š</p>
<pre><code>    @pyqtSlot()
    def on_pushButtonDel_clicked(self):
        print('del: ' + self.del_url)
        if self.del_url is not None and self.del_url is not '':
            threading.Thread(target=sm_util.delete_img, args=(self.del_url,)).start()
            self.del_url = ''
            self.ui.labelImage.clear()
</code></pre>
<p>å¦‚æœ self.del_url ä¸ä¸ºç©ºï¼š<br>
è¿›è¡Œè¿›ç¨‹ï¼š<br>
<code>target=sm_util.delete_img</code> ï¼š<br>
def delete_img(del_url):<br>
requests.get(del_url)<br>
ä¼ å…¥çš„å‚æ•°ä¸ºï¼š<code>args=(self.del_url,)</code><br>
ç„¶åå°† self.del_url è¿™ä¸ªå˜é‡æ¸…ç©ºï¼›<br>
å†å°† labelImage æ¸…ç©ºï¼›<br>
å…¶ä»–ä¹ˆçš„äº†ã€‚</p>
<h2 id="æ–‡ä»¶5-configwidgetpy">æ–‡ä»¶5 ConfigWidget.py</h2>
<pre><code>    def __init__(self, parent):
        QWidget.__init__(self, parent)
        self.ui = ui_ConfigWidget.Ui_configWidget()
        self.ui.setupUi(self)
        self.minWhenCut = self.ui.checkBoxMin.isChecked()

    @pyqtSlot(int)
    def on_checkBoxMin_stateChanged(self, state):
        if state == 0:
            self.minWhenCut = False
        else:
            self.minWhenCut = True
</code></pre>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼ŒcheckBox çš„çŠ¶æ€ä¸ºæ•°å€¼çŠ¶æ€è®°å½•çš„ï¼Œæ‰€ä»¥å‹å·æ§½ç»‘å®šçš„æ—¶å€™å¯ä»¥ç”¨intæ¥æ¥å—stateçŠ¶æ€ã€‚</p>
<h2 id="æ–‡ä»¶6-screen_capturepy">æ–‡ä»¶6 screen_capture.py</h2>
<p>è¿™ä¸ªæ˜¯å®ç°æˆªå›¾åŠŸèƒ½çš„</p>
<pre><code>from PyQt5.QtGui import QPixmap, QGuiApplication, QColor, QPen, QPainter
from PyQt5.QtWidgets import QWidget, QApplication
from PyQt5.QtCore import Qt, pyqtSlot, pyqtSignal, qAbs, QRect
</code></pre>
<p>å¯¼å…¥è¯¸å¦‚ QPenã€QPainter qAbsè¿™æˆ‘ä¸æ€ä¹ˆç†Ÿæ‚‰çš„åº“ã€‚</p>
<p>é¦–å…ˆæ˜¯å‡½æ•°çš„åŠŸèƒ½éƒ½æ˜¯å†™åœ¨ä¸€ä¸ªç±» CaptureScreen é‡Œé¢çš„<br>
class CaptureScreen(QWidget):<br>
&quot;&quot;&quot;<br>
æˆªå±: ä½¿ç”¨æ—¶ä»…éœ€ç›´æ¥newä¸€ä¸ªè¯¥å®ä¾‹å³å¯å‡ºç°å…¨å±çš„æˆªå±ç•Œé¢<br>
&quot;&quot;&quot;<br>
load_pixmap = None<br>
screen_width = None<br>
screen_height = None<br>
is_mouse_pressed = None<br>
begin_pos = None<br>
end_pos = None<br>
capture_pixmap = None<br>
painter = QPainter()<br>
signal_complete_capture = pyqtSignal(QPixmap)<br>
ä¸€äº›å¸ƒå°”å€¼ä¹‹çš„è®¾å®šï¼Œéƒ½æ˜¯ Noneï¼Œç„¶åæ˜¯å®ä¾‹åŒ–ä¸€ä¸ª QPainterå¯¹è±¡ã€‚ S<br>
å®šä¹‰ä¸€ä¸ªä¿¡å·<code>signal_complete_capture</code></p>
<p>å…·ä½“çš„ï¼Œåˆå§‹åŒ–ä¸­ï¼š<br>
def <strong>init</strong>(self):<br>
QWidget.<strong>init</strong>(self)<br>
self.init_window()<br>
self.load_background_pixmap()<br>
self.setCursor(Qt.CrossCursor)<br>
self.show()</p>
<ul>
<li>
<p>å®ä¾‹åŒ–ä¸€ä¸ª QWidget å¯¹è±¡ã€‚</p>
</li>
<li>
<p>è¿è¡Œ<code>init_window()</code></p>
<pre><code>  ```
  def init_window(self):
          self.setMouseTracking(True)
          self.setWindowFlags(Qt.FramelessWindowHint)
          self.setWindowState(Qt.WindowActive | Qt.WindowFullScreen)
  ```
  è¿™é‡Œæœ‰ä¸€äº›è®¾ç½®ï¼š
  1.`setMouseTracking(True)`è¿™ä¸ªå±æ€§ä¿å­˜çš„æ˜¯çª—å£éƒ¨ä»¶è·Ÿè¸ªé¼ æ ‡æ˜¯å¦ç”Ÿæ•ˆã€‚
  2.è®¾ç½®æ— è¾¹æ¡†
  3.è®¾ç½®æ¡Œé¢çª—å£å¤„äºæ¿€æ´»çŠ¶æ€ã€‚è®¾ç½®æ¿€æ´»ä¸ºå…¨å±ã€‚
</code></pre>
</li>
<li>
<p><code>load_background_pixmap()</code> æˆªå–å½“å‰å±å¹•çš„å›¾ç‰‡ï¼š<br>
<code>def load_background_pixmap(self): 	 # æˆªä¸‹å½“å‰å±å¹•çš„å›¾åƒ 	 self.load_pixmap = QGuiApplication.primaryScreen().grabWindow(QApplication.desktop().winId()) 	 self.screen_width = self.load_pixmap.width() 	 self.screen_height = self.load_pixmap.height()</code><br>
1. <code>QGuiApplication.primaryScreen().grabWindow(QApplication.desktop().winId())</code> æˆªå›¾æ“ä½œã€‚<br>
2. è·å–æˆªå›¾çš„é•¿åº¦ä¸å®½åº¦ã€‚</p>
</li>
<li>
<p>setCursorå‚è€ƒï¼šhttps://doc-snapshots.qt.io/qtforpython/PySide2/QtGui/QCursor.html æ˜¯ç”¨æ¥è®¾ç½®é¼ æ ‡æ ·å¼çš„ã€‚è¿™é‡Œå°±æ˜¯æŠŠé¼ æ ‡è®¾ç½®ä¸ºåå­—æ¶æ ·å¼ã€‚</p>
</li>
</ul>
<p>åˆå§‹åŒ–ç»“æŸåï¼Œåº”å½“æ˜¯è·å–ä¸€å¼ å½“å‰å…¨å±å¹•çš„æˆªå›¾ï¼Œç„¶åè·å¾—<code>self.screen_width ä¸ self.screen_height</code> å…¨å±€å˜é‡ï¼Œé¼ æ ‡å˜ä¸ºåå­—æ¶æ ·å¼ã€‚å¼€å§‹ç›‘æ§é¼ æ ‡è¡Œä¸ºã€‚</p>
<p>æ¥ä¸‹æ¥ä¸ºé¼ æ ‡è¡Œä¸ºï¼š</p>
<pre><code>  def mousePressEvent(self, event):
        if event.button() == Qt.LeftButton:
            self.is_mouse_pressed = True
            self.begin_pos = event.pos()
        if event.button() == Qt.RightButton:
            self.close()
        return QWidget.mousePressEvent(self, event)

    def mouseMoveEvent(self, event):
        if self.is_mouse_pressed is True:
            self.end_pos = event.pos()
            self.update()
        return QWidget.mouseMoveEvent(self, event)

    def mouseReleaseEvent(self, event):
        self.end_pos = event.pos()
        self.is_mouse_pressed = False
        return QWidget.mouseReleaseEvent(self, event)

    def mouseDoubleClickEvent(self, event):
        if self.capture_pixmap is not None:
            self.signal_complete_capture.emit(self.capture_pixmap)
            self.close()
</code></pre>
<p>ä¸€å…±å››ä¸ªå‡½æ•°ï¼Œéœ€è¦åç»­å†å­¦ä¹ é¼ æ ‡äº‹ä»¶çš„ç›¸å…³å†…å®¹ã€‚</p>
<ol>
<li>mousePressEventï¼š</li>
<li>å…ˆåˆ¤æ–­ç‚¹å‡»äº‹ä»¶ï¼Œå¦‚æœæ˜¯leftButton å·¦é”®ç‚¹å‡»ï¼Œé‚£ä¹ˆå¼€å§‹ï¼Œå³é”®ç‚¹å‡»åˆ™å–æ¶ˆã€‚</li>
<li>è®°ä½ä½ç½® envt.pos() ï¼šç”±pos()è·å–çš„ä½ç½®æ˜¯ä¸»çª—å£ï¼ˆwidgetçª—å£ï¼‰å·¦ä¸Šè§’ï¼ˆè¾¹æ¡†çš„å·¦ä¸Šè§’ï¼Œå¤–å·¦ä¸Šè§’ï¼‰ç›¸å¯¹äºç”µè„‘å±å¹•çš„å·¦ä¸Šè§’çš„ï¼ˆx=0,y=0ï¼‰åç§»ä½ç½®<br>
2.mouseMoveEvent ï¼š</li>
</ol>
<ul>
<li>åšé¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼Œå¦‚æœå·²ç»ç‚¹å‡»æ¥å·¦é”®ï¼Œå°±å¼€å§‹è®°å½• end_pos çš„ä½ç½®ã€‚</li>
</ul>
<ol start="3">
<li>mouseReleaseEvent</li>
<li>é¼ æ ‡é‡Šæ”¾çš„åŠ¨ä½œï¼Œè·å–çš„<code>self.end_pos</code>çš„ä½ç½®ï¼›</li>
<li>å°†å˜é‡<code>self.is_mouse_pressed = False</code>é‡ç½®ä¸º Falseã€‚</li>
</ol>
<p>4.mouseDoubleClickEvent</p>
<ul>
<li>é¼ æ ‡åŒå‡»åŠ¨ä½œï¼Œå¦‚æœ self.capture_pixmap ä¸ä¸ºç©ºï¼Œåˆ™å‘é€ä¿¡å·ï¼Œå¹¶å…³é—­ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥æ˜¯é‡ç»˜äº‹ä»¶ï¼š</p>
<pre><code>    def paintEvent(self, event):
        self.painter.begin(self)
        shadow_color = QColor(0, 0, 0, 100)  # é˜´å½±é¢œè‰²è®¾ç½®
        self.painter.setPen(QPen(Qt.blue, 1, Qt.SolidLine, Qt.FlatCap))  # è®¾ç½®ç”»ç¬”
        self.painter.drawPixmap(0, 0, self.load_pixmap)  # å°†èƒŒæ™¯å›¾ç‰‡ç”»åˆ°çª—ä½“ä¸Š
        self.painter.fillRect(self.load_pixmap.rect(), shadow_color)  # ç”»å½±ç½©æ•ˆæœ
        if self.is_mouse_pressed:
            selected_rect = self.get_rect(self.begin_pos, self.end_pos)
            self.capture_pixmap = self.load_pixmap.copy(selected_rect)
            self.painter.drawPixmap(selected_rect.topLeft(), self.capture_pixmap)
            self.painter.drawRect(selected_rect)
        self.painter.end()  # é‡ç»˜ç»“æŸ
</code></pre>
<p>æ³¨é‡Šå·²ç»å†™äº†ï¼Œå¤§è‡´å°±æ˜¯å°†èƒŒæ™¯å›¾ç”»å‡ºæ¥ï¼Œå¹¶ä¸”æ ¹æ®é¼ æ ‡äº‹ä»¶å¾—åˆ°çš„ï¼š<code>self.begin_pos, self.end_pos</code>ä½ç½®ã€‚ è¿™é‡Œç”¨åˆ°æ¥ get_rect å‡½æ•°ï¼š<br>
def get_rect(self, beginPoint, endPoint):<br>
width = qAbs(beginPoint.x() - endPoint.x())<br>
height = qAbs(beginPoint.y() - endPoint.y())<br>
x = beginPoint.x() if beginPoint.x() &lt; endPoint.x() else endPoint.x()<br>
y = beginPoint.y() if beginPoint.y() &lt; endPoint.y() else endPoint.y()<br>
selected_rect = QRect(x, y, width, height)<br>
# é¿å…å®½æˆ–é«˜ä¸ºé›¶æ—¶æ‹·è´æˆªå›¾æœ‰è¯¯<br>
# å¯ä»¥çœ‹QQæˆªå›¾ï¼Œå½“é€‰å–æˆªå›¾å®½æˆ–é«˜ä¸ºé›¶æ—¶é»˜è®¤ä¸º2<br>
if selected_rect.width() == 0:<br>
selected_rect.setWidth(1)<br>
if selected_rect.height() == 0:<br>
selected_rect.setHeight(1)<br>
return selected_rect</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95">æ–‡ä»¶ç›®å½•</a></li>
<li><a href="#%E6%96%87%E4%BB%B61-mainpy">æ–‡ä»¶1-main.py</a></li>
<li><a href="#%E6%96%87%E4%BB%B62-picpongpy">æ–‡ä»¶2-PicPong.py</a>
<ul>
<li><a href="#0-%E5%AF%BC%E5%87%BA%E7%9A%84%E5%BA%93">0. å¯¼å‡ºçš„åº“</a></li>
<li><a href="#1-%E5%88%9D%E5%A7%8B%E5%8C%96">1. åˆå§‹åŒ–ï¼š</a></li>
<li><a href="#2%E7%BE%8E%E5%8C%96%E7%9B%B8%E5%85%B3">2.ç¾åŒ–ç›¸å…³ï¼š</a></li>
<li><a href="#3%E6%8C%89%E9%92%AE%E5%8A%9F%E8%83%BD">3.æŒ‰é’®åŠŸèƒ½</a></li>
<li><a href="#%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6">é”®ç›˜äº‹ä»¶</a></li>
</ul>
</li>
<li><a href="#%E6%96%87%E4%BB%B63-uploadwidgetpy">æ–‡ä»¶3 UploadWidget.py</a>
<ul>
<li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96">åˆå§‹åŒ–</a></li>
<li><a href="#%E6%8C%89%E9%92%AE%E4%B8%8E%E4%BF%A1%E5%8F%B7">æŒ‰é’®ä¸ä¿¡å·</a></li>
</ul>
</li>
<li><a href="#%E6%96%87%E4%BB%B64-viewwidgetpy">æ–‡ä»¶4 ViewWidget.py</a>
<ul>
<li><a href="#0%E5%88%9D%E5%A7%8B%E5%8C%96">0.åˆå§‹åŒ–</a></li>
<li><a href="#1%E4%BF%A1%E5%8F%B7%E6%A7%BD%E5%87%BD%E6%95%B0">1.ä¿¡å·æ§½å‡½æ•°ï¼š</a></li>
</ul>
</li>
<li><a href="#%E6%96%87%E4%BB%B65-configwidgetpy">æ–‡ä»¶5 ConfigWidget.py</a></li>
<li><a href="#%E6%96%87%E4%BB%B66-screen_capturepy">æ–‡ä»¶6 screen_capture.py</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://hwang.top/post/ml-python-shi-xian-ols">
              <h3 class="post-title">
                ML - Python å®ç° OLS
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://hwang.top/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()

  let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

  // This should probably be throttled.
  // Especially because it triggers during smooth scrolling.
  // https://lodash.com/docs/4.17.10#throttle
  // You could do like...
  // window.addEventListener("scroll", () => {
  //    _.throttle(doThatStuff, 100);
  // });
  // Only not doing it here to keep this Pen dependency-free.

  window.addEventListener("scroll", event => {
    let fromTop = window.scrollY;

    mainNavLinks.forEach((link, index) => {
      let section = document.getElementById(decodeURI(link.hash).substring(1));
      let nextSection = null
      if (mainNavLinks[index + 1]) {
        nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
      }
      console.log('section.offsetHeight', section.offsetHeight);
      if (section.offsetTop <= fromTop) {
        if (nextSection) {
          if (nextSection.offsetTop > fromTop) {
            link.classList.add("current");
          } else {
            link.classList.remove("current");    
          }
        } else {
          link.classList.add("current");
        }
      } else {
        link.classList.remove("current");
      }
    });
  });

</script>

      </div>
    </div>
  </body>
</html>
