<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title> ç”¨ Python åšè®¡é‡ ï¼ˆä¸€ï¼‰â€”â€” åˆè¯†Python çš„è®¡é‡æ¨¡å—ï¼š Statsmodels  | Hwang&#39;s Blog</title>
<meta name="description" content="<div>
æ¬¢è¿æ¥åˆ° Hwang çš„å°åšå®¢ <br>
<p style="font-size:10px">
ğŸ“š åšå®¢é€šè¿‡ Gridea æ­å»ºï¼Œæ„Ÿè°¢ Gridea çš„å…è´¹æœåŠ¡ï¼›è¹­åœ¨ Githubï¼Œæ„Ÿè°¢ Github.com æä¾›çš„æœåŠ¡å™¨èµ„æº  <br>
âœï¸ æ–‡ç« ç”± Hwangï¼Œåœ¨ Ulysses ä¸Šå®Œæˆå†™ä½œ/äº¦æˆ–è€…æ‹·è´<br>
ğŸ‘¨â€ğŸ¨ å°é¢ç”± Hwangï¼Œåœ¨ Figma ä¸Šå®Œæˆåˆ›ä½œ <br>
è¿™é‡Œæ˜¾ç„¶ä¸æ˜¯ä»€ä¹ˆæŠ€æœ¯åšå®¢ï¼Œä¹Ÿä¸ä¼šæœ‰å¤ªå¤šå€¼å¾—æœŸå¾…çš„å¹²è´§ã€‚
</p>
</div>" />
<link rel="shortcut icon" href="https://hwang.top/favicon.ico?v=1582701758690">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://hwang.top/styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://hwang.top">
  <img class="avatar" src="https://hwang.top/images/avatar.png?v=1582701758690" alt="">
  </a>
  <h1 class="site-title">
    Hwang&#39;s Blog
  </h1>
  <p class="site-description">
    <div>
æ¬¢è¿æ¥åˆ° Hwang çš„å°åšå®¢ <br>
<p style="font-size:10px">
ğŸ“š åšå®¢é€šè¿‡ Gridea æ­å»ºï¼Œæ„Ÿè°¢ Gridea çš„å…è´¹æœåŠ¡ï¼›è¹­åœ¨ Githubï¼Œæ„Ÿè°¢ Github.com æä¾›çš„æœåŠ¡å™¨èµ„æº  <br>
âœï¸ æ–‡ç« ç”± Hwangï¼Œåœ¨ Ulysses ä¸Šå®Œæˆå†™ä½œ/äº¦æˆ–è€…æ‹·è´<br>
ğŸ‘¨â€ğŸ¨ å°é¢ç”± Hwangï¼Œåœ¨ Figma ä¸Šå®Œæˆåˆ›ä½œ <br>
è¿™é‡Œæ˜¾ç„¶ä¸æ˜¯ä»€ä¹ˆæŠ€æœ¯åšå®¢ï¼Œä¹Ÿä¸ä¼šæœ‰å¤ªå¤šå€¼å¾—æœŸå¾…çš„å¹²è´§ã€‚
</p>
</div>
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
               ç”¨ Python åšè®¡é‡ ï¼ˆä¸€ï¼‰â€”â€” åˆè¯†Python çš„è®¡é‡æ¨¡å—ï¼š Statsmodels 
            </h2>
            <div class="post-info">
              <span>
                2019-07-16
              </span>
              <span>
                10 min read
              </span>
              
                <a href="https://hwang.top/tag/oEltlpWF3" class="post-tag">
                  # Python
                </a>
              
                <a href="https://hwang.top/tag/w0VIrv_ivr" class="post-tag">
                  # æ•°æ®Seminar
                </a>
              
                <a href="https://hwang.top/tag/CjydnGrXlu" class="post-tag">
                  # é•¿æ–‡
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://hwang.top/post-images/yong-python-zuo-ji-liang-yi-chu-shi-python-de-ji-liang-mo-kuai-statsmodels.png" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <blockquote>
<p>æœ¬æ–‡å‘å¸ƒäº ã€Œ æ•°æ®Seminar ã€å…¬ä¼—å·ï¼šhttps://mp.weixin.qq.com/s?src=11&amp;timestamp=1569839526&amp;ver=1884&amp;signature=hxZrP-JJKRnGggkDaM2PDBJc7DJsrqQWkpBciqqbDAEeqjNhRKIc37VK4bPqNUKSDjtXPGV0yto99QK5ywqoagPK1PhKPC0dynzFMNVchJWrQG5X3VUMMBadcyBnh7hi&amp;new=1</p>
</blockquote>
 <script type="text/x-mathjax-config">
 MathJax.Hub.Config({tex2jax: {inlineMath:[['$','$']]}});
 </script>
 <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<blockquote>
<p>é˜…è¯»æœ¬æ–‡å‰éœ€è¦æŒæ¡çš„åŸºç¡€çŸ¥è¯†ï¼š<br>
Python çš„åŸºç¡€çŸ¥è¯†ã€ numpy çš„åŸºç¡€çŸ¥è¯†ã€ pandas çš„åŸºç¡€çŸ¥è¯†<br>
åŸºæœ¬çš„è®¡é‡çŸ¥è¯†<br>
å¦‚æœä½ è¿˜ä¸ä¼šï¼Œé‚£ä¹ˆæœ¬æ–‡ä¹Ÿä¼šä»‹ç»ä¸€äº› python è¯­æ³•çš„åŸºç¡€å†…å®¹ï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ã€‚</p>
</blockquote>
<p>éšç€æ•°æ®èµ„æºçš„æ—¥æ¸ä¸°å¯Œï¼Œå­¦è€…ä»¬è¶Šæ¥è¶Šå¤šçš„éœ€è¦æ¥è§¦åˆ°å¤§æ•°æ®çš„å¤„ç†ï¼Œè®¸å¤šå­¦è€…è¿˜æ˜¯ä¹ æƒ¯ä½¿ç”¨ Stata å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œè€Œ Stata ç”±äºå…¶è‡ªèº«çš„é™åˆ¶ï¼Œåœ¨å¤„ç†å¤§æ•°æ®é›†æ—¶è¦ä¹ˆéœ€è¦å¼ºåŠ²çš„å¤„ç†æ€§èƒ½ï¼ˆæ˜‚è´µçš„ç¡¬ä»¶æˆæœ¬ï¼‰ï¼Œè¦ä¹ˆéœ€è¦ç­‰å¾…è¾ƒé•¿æ—¶é—´ï¼ˆæ›´åŠ æ˜‚è´µçš„æ—¶é—´æˆæœ¬ï¼‰ã€‚Python å’Œ R ä¹Ÿå°±æ—¥æ¸è¿›å…¥å­¦è€…çš„è§†é‡ï¼Œç›¸å¯¹äº R ï¼ŒPython çš„è¯­æ³•æ›´ä¸ºç®€å•ï¼Œæˆä¸ºä¸€éƒ¨åˆ†å­¦è€…çš„é¦–é€‰ã€‚</p>
<p>åœ¨æ•°æ®å¤„ç†ä¸Šï¼Œnumpy å’Œ pandas çš„ç»„åˆï¼Œä½¿å¾— Python èƒ½å¤Ÿè½»æ¾åº”å¯¹åƒä¸‡çº§åˆ«çš„æ•°æ®å¤„ç†ã€‚åœ¨æ”»å…‹æ•°æ®å¤„ç†è¿™ä¸€ç¯åï¼Œåœ¨æ•°æ®åº”ç”¨ä¸Šï¼Œé™¤äº†æ–°æ½®çš„æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ çš„æ–¹æ³•ï¼Œå¯¹äºç°é˜¶æ®µç¤¾ç§‘å­¦è€…æ¥è¯´ï¼Œè®¡é‡å¯èƒ½æ‰æ˜¯æœ€ç°å®çš„ã€‚åœ¨ Python ä¸­å¤„ç†çš„æ•°æ®å¦‚æœè¿˜éœ€è¦è°ƒå›åˆ° Stata ä¸­åšè®¡é‡ï¼Œé‚£æœªå…å¤ªã€Œè¹©è„šã€ã€‚ä»Šå¤©ï¼Œæ•°æ®Seminar å…¬ä¼—å·å°†å¸¦å¤§å®¶ä½“éªŒ Python ä¸Šçš„ç¬¬ä¸‰æ–¹è®¡é‡åº“ï¼š<a href="https://www.statsmodels.org/stable/index.html">Statsmodels</a> ã€‚</p>
<h2 id="ç®€ä»‹">ç®€ä»‹</h2>
<p>Statsmodels æ˜¯ä¸€ä¸ªPythonçš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œä»–å°è£…äº†è®¸å¤šè®¡é‡æ¨¡å‹ï¼Œæ–¹ä¾¿å­¦è€…ç›´æ¥è°ƒç”¨ã€‚æ‰€è°“å°è£…ï¼Œå°±ç›¸å½“äº Stata ä¸­ä¸€ä¸ª <code>reg</code> å‘½ä»¤ï¼Œä»£è¡¨äº†æœ€åŸºç¡€çš„ OLS å›å½’å‘½ä»¤ï¼Œåœ¨Statsmodels ä¸­ä¹Ÿæœ‰ç±»ä¼¼ <code>reg</code> çš„è¯­å¥ï¼Œæä¾›ç»™ OLS ä¼°è®¡ã€‚å¦å¤– Statsmodels çš„å¼€æºåè®®ä¸º <a href="https://baike.baidu.com/item/BSD%E8%AE%B8%E5%8F%AF%E5%8D%8F%E8%AE%AE">BSDÂ </a>ï¼ˆåŸºæœ¬ä¸Šå¯¹äºç”¨æˆ·æ¥è¯´å±äºä¸ºæ‰€æ¬²ä¸ºåè®®ï¼Œä½ å¯ä»¥ä»»æ„ä½¿ç”¨è¿™æ¬¾æ‰©å¼ åŒ…ï¼Œå…·ä½“å‚è§é“¾æ¥åœ°å€ï¼‰ã€‚</p>
<blockquote>
<p>statsmodels is a Python module that provides classes and functions for the estimation of many different statistical models, as well as for conducting statistical tests, and statistical data exploration. An extensive list of result statistics are available for each estimator. The results are tested against existing statistical packages to ensure that they are correct. The package is released under the open source Modified BSD (3-clause) license. The online documentation is hosted at statsmodels.org.</p>
</blockquote>
<h2 id="å®‰è£…">å®‰è£…ï¼š</h2>
<p>å¦‚æœä½ ä½¿ç”¨ Anaconda å®‰è£…çš„ python ï¼Œé‚£ä¹ˆï¼š</p>
<pre><code class="language-bash">conda install statsmodels
</code></pre>
<p>å¦‚æœä½ ä½¿ç”¨ pip ç®¡ç†ä½ çš„pythonåŒ…ï¼Œé‚£ä¹ˆï¼š</p>
<pre><code class="language-bash">pip install statsmodels # python2 
</code></pre>
<p>æˆ–è€…ï¼š</p>
<pre><code class="language-bash">pip3 install statsmodels #python3
</code></pre>
<h2 id="ç²¾è¯»ä»£ç åˆæ¢ols">â€œç²¾è¯»â€ä»£ç ï¼Œåˆæ¢ï¼šOLS</h2>
<p>å®˜æ–¹çš„è¯´æ˜æ–‡æ¡£ï¼š<a href="http://www.statsmodels.org/stable/gettingstarted.html">http://www.statsmodels.org/stable/gettingstarted.html</a></p>
<p>é¦–å…ˆå…ˆçœ‹äº†ä¸€ä¸‹ OLS çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="language-python">import numpy as np
import statsmodels.api as sm
import statsmodels.formula.api as smf

dat = sm.datasets.get_rdataset(&quot;Guerry&quot;, &quot;HistData&quot;).data
results = smf.ols('Lottery ~ Literacy + np.log(Pop1831)', data=dat).fit()
print(results.summary())
</code></pre>
<p>è¿è¡Œåï¼š<br>
<img src="DraggedImage.png" alt="" loading="lazy"><br>
*(æœ¬æ–‡é‡‡ç”¨çš„ç¼–è¾‘å™¨ä¸º Google çš„ colab)Â *</p>
<p>æ˜¯çš„ï¼ŒOLSå°±æ˜¯è¿™ä¹ˆå‡ è¡Œï¼Œå…·ä½“æ¥çœ‹å†…å®¹ï¼Œå…¶å®è¿›è¡Œ OLS å›å½’åªéœ€è¦ä¸€è¡Œå†…å®¹ã€‚ä¸ºäº†æ–¹ä¾¿ Python åŸºç¡€ä¸é‚£ä¹ˆå¥½çš„åŒå­¦ï¼Œæˆ‘ä»¬é©»è¡Œâ€œç²¾è¯»â€ä¸€éè¿™äº›ä»£ç ï¼š</p>
<h3 id="1-å¯¼å…¥æ¨¡å—">1. å¯¼å…¥æ¨¡å—</h3>
<pre><code class="language-python">import numpy as np
import statsmodels.api as sm
import statsmodels.formula.api as smf
</code></pre>
<p>é¦–å…ˆæ˜¯éœ€è¦å¯¼å…¥ numpyã€statsmodels çš„ç›¸å…³æ¨¡å—ï¼Œnumpy æ¨èçš„ç¼©å†™å‘½å npï¼Œstatsmodels æ¨èçš„ç¼©å†™å‘½åæ˜¯ smï¼Œè¿™æ ·åé¢çš„ä»£ç å°±å¯ä»¥é€šè¿‡ <code>np.[å…·ä½“çš„å‡½æ•°\æ–¹æ³•]</code> ï¼Œ<code>sm. [å…·ä½“çš„å‡½æ•°\æ–¹æ³•]</code> çš„æ–¹å¼æ¥æ›´åŠ ç®€æ´çš„è°ƒç”¨äº†ã€‚</p>
<h3 id="2-ç”Ÿæˆæµ‹è¯•æ•°æ®é›†">2. ç”Ÿæˆæµ‹è¯•æ•°æ®é›†</h3>
<pre><code class="language-python">dat = sm.datasets.get_rdataset(&quot;Guerry&quot;, &quot;HistData&quot;).data
</code></pre>
<p>ç”±äºå¹¶æ²¡æœ‰ç°æˆæ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ statsmodels ä¸­è‡ªå¸¦çš„æ•°æ®é›†ï¼Œå…³äºè¯¥æ•°æ®é›†çš„å…·ä½“ä¿¡æ¯å¯ä»¥å‚è€ƒï¼š<a href="https://vincentarelbundock.github.io/Rdatasets/doc/HistData/Guerry.html">https://vincentarelbundock.github.io/Rdatasets/doc/HistData/Guerry.html</a>ï¼Œç®€å•æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå…³äºçŠ¯ç½ªã€è¯†å­—ç­‰ç›¸å…³å†…å®¹çš„ç¤¾ä¼šç§‘å­¦é¢†åŸŸçš„æ•°æ®é›†ã€‚<br>
<img src="DraggedImage-1.png" alt="" loading="lazy"></p>
<p>è¿™ä¸ªæ•°æ®é›†ä»¥DataFrame æ ¼å¼çš„å‚¨å­˜åœ¨äº† <code>dat</code> è¿™ä¸ªå˜é‡ä¸­ã€‚ DataFrame æ ¼å¼åœ¨ Python ä¸­è¢«å¹¿æ³›çš„ä½¿ç”¨ï¼Œå¯ä»¥è¯´æ— è®ºæ˜¯æœºå™¨å­¦ä¹ è¿˜æ˜¯æœ¬æ–‡ä»‹ç»çš„è®¡é‡ç›¸å…³å†…å®¹ï¼ŒDataFrame æ ¼å¼ç›¸å…³çš„æ“ä½œéƒ½éœ€è¦ç†Ÿç»ƒæŒæ¡ã€‚å…³äº DataFrame çš„ç›¸å…³å†…å®¹ï¼Œéœ€è¦æ›´åŠ ç»†è‡´çš„å»å­¦ä¹ Pythonçš„å¦ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ pandas ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚</p>
<h3 id="3-å›å½’æ“ä½œ">3. å›å½’æ“ä½œ</h3>
<pre><code class="language-python">results = smf.ols('Lottery ~ Literacy + np.log(Pop1831)', data=dat).fit()
</code></pre>
<p>é¦–å…ˆæ˜¯<code>smf.ols</code>ï¼Œ <code>smf</code> å°±æ˜¯å‰é¢çš„ <code>statsmodels.formula.api</code> ï¼ŒOLS å›å½’çš„æ–¹æ³•åœ¨ <code>statsmodels.formula.api</code>ä¸‹ï¼Œå¦‚æœå‰æ–‡æ²¡æœ‰å£°æ˜ <code>smf</code> ä»£è¡¨<code>statsmodels.formula.api</code> çš„è¯ï¼Œä½ è¿™é‡Œå¯å°±è¦å†™æˆ <code>statsmodels.formula.api.ols</code> äº†ï¼Œå¯è§åˆç†çš„ç¼©å†™å£°æ˜å¯¹äºä»£ç çš„ç®€æ´ç¾è§‚éå¸¸æœ‰å¸®åŠ©ã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯æ‹¬å·å†…çš„å†…å®¹<code>('Lottery ~ Literacy + np.log(Pop1831)', data=dat)</code><br>
è¿™å…¶å®æ˜¯<code>OLS</code>æ¨¡å‹éœ€è¦ä¼ å…¥çš„å‚æ•°ï¼Œä»¥<code>,</code>ä¸ºåŒºéš”ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›å½’æ¨¡å‹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°æ®ã€‚</p>
<p>åœ¨è¿™è¡Œä»£ç ä¸­ï¼Œå›å½’æ¨¡å‹æ˜¯ï¼š<code>'Lottery ~ Literacy + np.log(Pop1831)'</code>ï¼Œæ•°æ®æ˜¯å‰é¢åŠ è½½çš„<code>dat</code> ï¼Œæ¯”è¾ƒæ–¹ä¾¿çš„æ˜¯ï¼Œ<code>statsmodels</code>ï¼Œç›´æ¥ä»æ•°æ®<code>dat</code>ä¸­è¯»å–äº†å˜é‡åç§°ï¼Œå¹¶ä¸éœ€è¦è¿›è¡Œé¢å¤–çš„èµ‹å€¼æ“ä½œã€‚æˆ‘ä»¬å…·ä½“çœ‹ä¸€ä¸‹è¿™ä¸ªæ¨¡å‹çš„å†™æ³•ï¼Œå¯¹äºæ²¡æœ‰æ¥è§¦è¿‡ Python å’Œ R çš„è¯»è€…æ¥è¯´ï¼Œè¿™ç§å†™æ³•å¯èƒ½ç›¸å¯¹æœ‰äº›é™Œç”Ÿï¼Œå…¶å®è¿™ä¸ªæ¨¡å‹ä»£è¡¨äº†ï¼š</p>
<figure data-type="image" tabindex="1"><img src="DraggedImage-2.png" alt="" loading="lazy"></figure>
<p>è¿™ç§å†™æ³•å‚è€ƒäº†Rçš„ç›¸å…³å†…å®¹ï¼Œå…·ä½“æ˜¯ç”± Python ä¸­çš„ Patsy åº“å®ç°çš„ã€‚ä¸Šé¢è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªè®¡é‡æ¨¡å‹ï¼ˆä»–å½“ç„¶ä¸æ˜¯è®¡ç®— <code>Literacy + np.log(Pop1831)</code>çš„å’Œï¼Œ<code>Literacy</code> å’Œ <code>np.log(Pop1831)</code> éƒ½æ˜¯çŸ©é˜µï¼‰ã€‚è¿™å°±å’Œ Stata ä¸­ <code>reg y x0 x1 x2</code> æ˜¯ä¸€æ ·ï¼Œåªæ˜¯åœ¨Python ä¸­æ¨¡å‹éœ€è¦å†™æˆ<code>y~x0+x1+x2</code>ï¼Œè€Œ reg éœ€è¦å†™æˆ <code>smf.ols()</code>ã€‚</p>
<p>è¿™ä¸ªæ¨¡å‹ä¸­è¿˜ç”¨åˆ°äº†ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼š<code>np.log</code> ï¼Œå°±æ˜¯è¯´å¼•ç”¨äº† numpy ä¸­çš„ log å‡½æ•°ï¼Œå¯¹å˜é‡<code>Pop1831</code> å–å¯¹æ•°ï¼Œå°±æ˜¯ä½¿ç”¨ numpy è¿›è¡Œ log è¿ç®—ã€‚ å¦‚æœä½ ç›´æ¥å†™ <code>log(Pop1831)</code>ï¼ŒPythonæ˜¯ä¸çŸ¥é“ log æ˜¯åšä»€ä¹ˆçš„ï¼Œæ‰€ä»¥è¦å‘Šè¯‰ Pythonï¼Œè¿™ä¸ª log æ¥è‡ªäº numpyï¼Œè¿™æ · Python å°±èƒ½æ­£å¸¸å¤„ç† <code>Pop1831</code> è¿™ä¸ªæ•°æ®åˆ‡ç‰‡ï¼ˆâ€œåˆ‡ç‰‡â€ æ˜¯Pythonæ•°æ®å¤„ç†ä¸­å¸¸ç”¨åè¯ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ª DataFrame çš„ä¸€åˆ—ã€ä¸€è¡Œæˆ–è€…å‡ åˆ—ã€å‡ è¡Œçš„æ•°æ®ï¼‰äº†ã€‚</p>
<p>æœ€å <code>data=dat</code> å°±æ˜¯å£°æ˜å¯¹äºè¿™ä¸ªæ¨¡å‹ï¼Œä½¿ç”¨çš„æ•°æ®æ—¶ <code>dat</code>ï¼Œ è¿™æ ·å‰é¢çš„æ¨¡å‹ä¸­çš„ <code>Lottery</code> ã€<code>Literacy</code> å’Œ <code>Pop1831</code>ï¼Œstatsmodels éƒ½èƒ½æ™ºèƒ½çš„å»ä» DataFrame åˆ‡ç‰‡ï¼ˆåˆ‡ç‰‡æ“ä½œéœ€è¦å­¦ä¹ Pandaså“¦ï¼‰ï¼Œç„¶ååº”ç”¨åˆ°æ¨¡å‹ä¸­ã€‚</p>
<p>æ‹¬å·å†…çš„å†…å®¹å°±æ˜¯è¿›è¡Œå›å½’æ“ä½œçš„æ ¸å¿ƒã€‚</p>
<p>æ‹¬å·å¤–è¿˜æœ‰<code>.fit()</code>ï¼Œå°±æ˜¯å‘Šè¯‰ Pythonï¼Œå¯ä»¥è¿›è¡Œå›å½’è®¡ç®—äº†ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ª<code>.fit()</code> ï¼ŒPython åªä¼šè®°å½•è¿™ä¸ªæ¨¡å‹å’Œç›¸å…³çš„æ•°æ®ä¿¡æ¯ï¼Œè€Œæ·»åŠ äº†<code>.fit()</code>ï¼Œè®°å½•æ—¶å›å½’åçš„ç»“æœã€‚<br>
<img src="DraggedImage-3.png" alt="" loading="lazy"><br>
ï¼ˆä¸Šå›¾å¯ä»¥çœ‹åˆ°å‚¨å­˜åœ¨è®¡ç®—æœºä¸­çš„å†…å®¹æ˜¯æœ‰å·®å¼‚çš„ï¼‰</p>
<p>åŒæ ·ï¼Œ<code>.fit()</code> åè¾“å‡ºçš„ç»“æœä¹Ÿå¹¶éåƒ Stata é‚£æ ·é‚£æ ·ç›´æ¥è¾“å‡ºçš„äº‹ç»“æœï¼Œè€Œæ˜¯å°†ç»“æœå‚¨å­˜ï¼Œå¯ä»¥è¿›è¡Œå¤šç§æ–¹å¼çš„è°ƒç”¨ã€‚</p>
<p>å¦‚æœæƒ³è¾“å…¥ç»“æœï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ <code>results.summary()</code> ï¼Œå°†å…¶æ‰“å°å‡ºæ¥ï¼Œæ­£å¦‚ç¤ºä¾‹ä¸­å±•ç¤ºçš„é‚£æ ·ï¼š</p>
<figure data-type="image" tabindex="2"><img src="DraggedImage-4.png" alt="" loading="lazy"></figure>
<h2 id="ols-å®ä¾‹">OLS å®ä¾‹</h2>
<p>è¿™é‡Œç®€å•æ¼”ç¤ºä¸€ä¸‹ OLS å›å½’ï¼Œæ•°æ®å¤„ç†è¿™ä¸€éƒ¨åˆ†å†…å®¹ï¼Œåœ¨ Python ä¸­ä¸»è¦ä½¿ç”¨ numpy å’Œ pandasï¼Œè¿™é‡Œå°±ä¸æ¼”ç¤ºï¼Œæœ¬æ–‡ç›´æ¥è¯»å–å¤„ç†å®Œçš„æ•°æ®æ¥æ¼”ç¤º OLS çš„å†…å®¹ï¼š</p>
<p>æœ¬æ–‡çš„æ•°æ®æ¥è‡ªCFPSï¼Œä¸»è¦ç ”ç©¶çš„å†…å®¹æ˜¯å­å¥³è®¤çŸ¥èƒ½åŠ›å’ŒæœåŠ¡æ˜¯å¦åˆ›ä¸šçš„å…³ç³»ï¼Œå¤„ç†åçš„ç¬¬ä¸€ä¸ªå›å½’æ¨¡å‹çš„å†…å®¹ä¸»è¦æ˜¯ï¼Œæ¯äº²çš„åˆ›ä¸šçŠ¶æ€ï¼ˆ<code>self_employed_m_16</code>ï¼‰ï¼Œæ•™è‚²å¹´é™(<code>edu</code>)ï¼Œæ˜¯å¦å‚åŠ è¯¾å¤–è¡¥ä¹ (<code>extra_classes</code>)ï¼Œå®¶åº­è¯å“æ”¯å‡º(<code>expend_medical</code>)ã€è‡ªè¯„å¥åº·çŠ¶å†µ(<code>health</code>)ã€å®¶åº­æ°›å›´(<code>quarrel</code>)ã€ä¸æ¯äº²åŒä½æ—¶é•¿(<code>livewith_m</code>)ã€ä¸çˆ¶äº²åŒä½æ—¶å¸¸(<code>livewith_f</code>)ã€logçš„å®¶åº­æ”¶å…¥(<code>lg_fin</code>)ã€å­å¥³æ•°é‡(<code>num_chd</code>)ã€æ¯äº²çš„å—æ•™è‚²ç¨‹åº¦(<code>edu_m</code>)ã€çˆ¶äº²çš„å—æ•™è‚²ç¨‹åº¦(<code>edu_f</code>)ã€æˆ·å£(<code>hukou</code>)ã€ä¸œä¸­è¥¿éƒ¨è™šæ‹Ÿå˜é‡ï¼ˆ<code>east ã€ west</code>ï¼‰ï¼Œç„¶åè¢«è§£é‡Šå˜é‡å°±æ˜¯è®¤çŸ¥èƒ½åŠ›(<code>y_rznl</code>)ã€‚</p>
<pre><code class="language-python">import numpy as np
import pandas as pd
import statsmodels.api as sm
import statsmodels.formula.api as smf

df = pd.read_csv(&quot;testing.csv&quot;)
OLS_1 = smf.ols(&quot;y_rznl~ self_employed_m_16 + edu + extra_classes + \
    expend_medical + health + quarrel + livewith_m + livewith_f + \
    lg_fin + num_chd + edu_m + edu_f + hukou + east + west&quot;, data=df).fit()
print(OLS_1.summary())
</code></pre>
<p>æœ€åè¾“å‡ºç»“æœï¼š<br>
<img src="%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-07-07%20%E4%B8%8B%E5%8D%883.04.11.png" alt="" loading="lazy"></p>
<p>è€Œstataè¾“å‡ºçš„ç»“æœï¼ˆç½®ä¿¡åŒºé—´æ˜¯97.5%ï¼‰ï¼š<br>
<img src="%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-07-07%20%E4%B8%8B%E5%8D%883.11.40.png" alt="" loading="lazy"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç»“æœåŸºæœ¬ä¸€è‡´ã€‚</p>
<p>æœ€åï¼Œåœ¨OLSè¿™é‡Œæ¡ˆä¾‹ä¸­ï¼Œå¯ä»¥çœ‹åˆ° Python è¾“å‡ºç»“æœåŸºæœ¬ä¸ Stata ç›¸åŒï¼Œåœ¨ä»£ç çš„æ’°å†™ä¸Šï¼Œ Python åŒæ ·éå¸¸æ–¹ä¾¿ï¼Œå¹¶ä¸”ç”±äº Python æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨ä¸€äº›å¾ªç¯çš„æ’°å†™ä¸Šéå¸¸æœ‰ä¼˜åŠ¿ï¼Œä¾‹å¦‚æˆ‘éœ€è¦å¤šæ¬¡å¾ªç¯æŸå‡ ä¸ªå˜é‡ï¼Œä»¥åŠå¯¹åº”çš„è¢«è§£é‡Šå˜é‡ï¼š</p>
<pre><code class="language-python">import numpy as np
import pandas as pd
import statsmodels.api as sm
import statsmodels.formula.api as smf

df = pd.read_csv(&quot;testing.csv&quot;)
y_list =[y1, y2, y3, y4] # è¢«è§£é‡Šå˜é‡çš„åˆ—è¡¨
x0_list = [x0_1, x0_2, x0_3, x0_4, x0_5] # æŸä¸€ä¸ªè§£é‡Šå˜é‡çš„åˆ—è¡¨
model_list = []
for y in y_list:
	for x0 in x0_list:
		model = &quot;%s ~ %s + edu + extra_classes + \
    expend_medical + health + quarrel + livewith_m + livewith_f + \
    lg_fin + num_chd + edu_m + edu_f + hukou + east + west&quot; % (y, x0)
		OLS = smf.ols(model, data = df).fit()
		print(OLS.summary())
		
</code></pre>
<p>è¿™æ ·å°±èƒ½ä¸€æ¬¡æ€§ä¾æ¬¡è¾“å‡ºï¼Œä»¥ä¸‹å†…å®¹çš„å›å½’ç»“æœï¼š</p>
<ul>
<li>
<p><code>y1 = x0_1 + edu + extra_calsses +...</code></p>
</li>
<li>
<p><code>y1 = x0_2 + edu + extra_calsses +...</code></p>
</li>
<li>
<p><code>y1 = x0_3 + edu + extra_calsses +...</code><br>
â€¦</p>
</li>
<li>
<p><code>y1 = x0_5 + edu + extra_calsses +...</code></p>
</li>
<li>
<p><code>y2 = x0_1 + edu + extra_calsses +...</code></p>
</li>
<li>
<p><code>y2 = x0_2 + edu + extra_calsses +...</code><br>
â€¦</p>
</li>
<li>
<p><code>y2 = x0_5 + edu + extra_calsses +...</code><br>
â€¦</p>
</li>
<li>
<p><code>y4 = x0_5 + edu + extra_calsses +...</code></p>
</li>
</ul>
<p>æ‰€ä»¥æ— è®ºæ˜¯æ•°æ®å¤„ç†è¿˜æ˜¯è®¡é‡å›å½’ä¸­ï¼Œéƒ½èƒ½ç»™ä½ æå¤§çš„ä¾¿åˆ©ã€‚</p>
<p>ç›¸æ¯”Stataï¼ŒPython  æ˜¯å…è´¹å¼€æºçš„ï¼Œä¸éœ€è¦é¢å¤–çš„æˆæƒè´¹ç”¨ï¼Œå¹¶ä¸”å¦‚æœå¿—åœ¨æœºå™¨å­¦ä¹ ï¼Œé‚£ä¹ˆå…ˆä»ç›¸å¯¹ç†Ÿæ‚‰çš„è®¡é‡å…¥æ‰‹æˆ–è®¸æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E7%AE%80%E4%BB%8B">ç®€ä»‹</a></li>
<li><a href="#%E5%AE%89%E8%A3%85">å®‰è£…ï¼š</a></li>
<li><a href="#%E7%B2%BE%E8%AF%BB%E4%BB%A3%E7%A0%81%E5%88%9D%E6%8E%A2ols">â€œç²¾è¯»â€ä»£ç ï¼Œåˆæ¢ï¼šOLS</a>
<ul>
<li><a href="#1-%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97">1. å¯¼å…¥æ¨¡å—</a></li>
<li><a href="#2-%E7%94%9F%E6%88%90%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E9%9B%86">2. ç”Ÿæˆæµ‹è¯•æ•°æ®é›†</a></li>
<li><a href="#3-%E5%9B%9E%E5%BD%92%E6%93%8D%E4%BD%9C">3. å›å½’æ“ä½œ</a></li>
</ul>
</li>
<li><a href="#ols-%E5%AE%9E%E4%BE%8B">OLS å®ä¾‹</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://hwang.top/post/ru-he-zai-windows-de-gong-xiang-wen-jian-jia-zhong-chuang-jian-wen-jian-tu-biao">
              <h3 class="post-title">
                å¦‚ä½• åœ¨ Windows çš„å…±äº«æ–‡ä»¶å¤¹ä¸­åˆ›å»ºæ–‡ä»¶å›¾æ ‡
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://hwang.top/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()

  let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

  // This should probably be throttled.
  // Especially because it triggers during smooth scrolling.
  // https://lodash.com/docs/4.17.10#throttle
  // You could do like...
  // window.addEventListener("scroll", () => {
  //    _.throttle(doThatStuff, 100);
  // });
  // Only not doing it here to keep this Pen dependency-free.

  window.addEventListener("scroll", event => {
    let fromTop = window.scrollY;

    mainNavLinks.forEach((link, index) => {
      let section = document.getElementById(decodeURI(link.hash).substring(1));
      let nextSection = null
      if (mainNavLinks[index + 1]) {
        nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
      }
      console.log('section.offsetHeight', section.offsetHeight);
      if (section.offsetTop <= fromTop) {
        if (nextSection) {
          if (nextSection.offsetTop > fromTop) {
            link.classList.add("current");
          } else {
            link.classList.remove("current");    
          }
        } else {
          link.classList.add("current");
        }
      } else {
        link.classList.remove("current");
      }
    });
  });

</script>

      </div>
    </div>
  </body>
</html>
